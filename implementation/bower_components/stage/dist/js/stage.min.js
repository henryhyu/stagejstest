+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),s=typeof n=="object"&&n;if(!i&&/destroy|hide/.test(n))return;i||r.data("bs.tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})}var t=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};t.VERSION="3.3.6",t.TRANSITION_DURATION=150,t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},position:50},t.prototype.init=function(t,n,r){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1};if(this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");var i=this.options.trigger.split(" ");for(var s=i.length;s--;){var o=i[s];if(o=="click")this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if(o!="manual"){var u=o=="hover"?"mouseenter":"focusin",a=o=="hover"?"mouseleave":"focusout";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState[t.type=="focusin"?"focus":"hover"]=!0);if(n.tip().hasClass("in")||n.hoverState=="in"){n.hoverState="in";return}clearTimeout(n.timeout),n.hoverState="in";if(!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},t.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState[t.type=="focusout"?"focus":"hover"]=!1);if(n.isInStateTrue())return;clearTimeout(n.timeout),n.hoverState="out";if(!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},t.prototype.show=function(){var n=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(n);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(n.isDefaultPrevented()||!r)return;var i=this,s=this.tip(),o=this.getUID(this.type);this.setContent(),s.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&s.addClass("fade");var u=typeof this.options.placement=="function"?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,f=a.test(u);f&&(u=u.replace(a,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(u).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var l=this.getPosition(),c=s[0].offsetWidth,h=s[0].offsetHeight;if(f){var p=u,d=this.getPosition(this.$viewport);u=u=="bottom"&&l.bottom+h>d.bottom?"top":u=="top"&&l.top-h<d.top?"bottom":u=="right"&&l.right+c>d.width?"left":u=="left"&&l.left-c<d.left?"right":u,s.removeClass(p).addClass(u)}var v=this.getCalculatedOffset(u,l,c,h);this.applyPlacement(v,u);var m=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,e=="out"&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",m).emulateTransitionEnd(t.TRANSITION_DURATION):m()}},t.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,s=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),u=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(u)&&(u=0),t.top+=o,t.left+=u,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var a=r[0].offsetWidth,f=r[0].offsetHeight;n=="top"&&f!=s&&(t.top=t.top+s-f);var l=this.getViewportAdjustedDelta(n,t,a,f);l.left?t.left+=l.left:t.top+=l.top;var c=/top|bottom/.test(n),h=c?l.left*2-i+a:l.top*2-s+f,p=c?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(h,r[0][p],c)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",this.options.position*(1-e/t)+"%").css(n?"top":"left","")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(n){function o(){r.hoverState!="in"&&i.detach(),r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),n&&n()}var r=this,i=e(this.$tip),s=e.Event("hide.bs."+this.type);this.$element.trigger(s);if(s.isDefaultPrevented())return;return i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",o).emulateTransitionEnd(t.TRANSITION_DURATION):o(),this.hoverState=null,this},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r=n.tagName=="BODY",i=n.getBoundingClientRect();i.width==null&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var s=r?{top:0,left:0}:t.offset(),o={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},u=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,o,u,s)},t.prototype.getCalculatedOffset=function(e,t,n,r){return e=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-n*(this.options.position/100)}:e=="top"?{top:t.top-r,left:t.left+t.width/2-n*(this.options.position/100)}:e=="left"?{top:t.top+t.height/2-r*(this.options.position/100),left:t.left-n}:{top:t.top+t.height/2-r*(this.options.position/100),left:t.left+t.width}},t.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var s=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var u=t.top-s-o.scroll,a=t.top+s-o.scroll+r;u<o.top?i.top=o.top-u:a>o.top+o.height&&(i.top=o.top+o.height-a)}else{var f=t.left-s,l=t.left+s+n;f<o.left?i.left=o.left-f:l>o.right&&(i.left=o.left+o.width-l)}return i},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},t.prototype.getUID=function(e){do e+=~~(Math.random()*1e6);while(document.getElementById(e));return e},t.prototype.tip=function(){if(!this.$tip){this.$tip=e(this.options.template);if(this.$tip.length!=1)throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!")}return this.$tip},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null})};var r=e.fn.tooltip;e.fn.tooltip=n,e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),i=r.data("bs.popover"),s=typeof n=="object"&&n;if(!i&&/destroy|hide/.test(n))return;i||r.data("bs.popover",i=new t(this,s)),typeof n=="string"&&i[n]()})}var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.6",t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?typeof n=="string"?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||(typeof t.content=="function"?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=n,e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),function(){marked.Lexer.lex=function(e,t){var n=new marked.Lexer(t);return _.extend(n.rules,{clsfences:/^ *(\^{3,}|\!{3,}) *(\S+(?: +\S+)*)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/}),n.lex(e)},marked.Lexer.prototype.token=function(e,t,n){var e=e.replace(/^ +$/gm,""),r,i,s,o,u,a,f,l,c;while(e){if(s=this.rules.newline.exec(e))e=e.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"});if(s=this.rules.code.exec(e)){e=e.substring(s[0].length),s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?s:s.replace(/\n+$/,"")});continue}if(s=this.rules.fences.exec(e)){e=e.substring(s[0].length),this.tokens.push({type:"code",lang:s[2],text:s[3]||""});continue}if(s=this.rules.clsfences.exec(e)){e=e.substring(s[0].length),this.tokens.push({type:"clswrapper",cls:s[2],text:s[3]});continue}if(s=this.rules.heading.exec(e)){e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});continue}if(t&&(s=this.rules.nptable.exec(e))){e=e.substring(s[0].length),a={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/\n$/,"").split("\n")};for(l=0;l<a.align.length;l++)/^ *-+: *$/.test(a.align[l])?a.align[l]="right":/^ *:-+: *$/.test(a.align[l])?a.align[l]="center":/^ *:-+ *$/.test(a.align[l])?a.align[l]="left":a.align[l]=null;for(l=0;l<a.cells.length;l++)a.cells[l]=a.cells[l].split(/ *\| */);this.tokens.push(a);continue}if(s=this.rules.lheading.exec(e)){e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:s[2]==="="?1:2,text:s[1]});continue}if(s=this.rules.hr.exec(e)){e=e.substring(s[0].length),this.tokens.push({type:"hr"});continue}if(s=this.rules.blockquote.exec(e)){e=e.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,t,!0),this.tokens.push({type:"blockquote_end"});continue}if(s=this.rules.list.exec(e)){e=e.substring(s[0].length),o=s[2],this.tokens.push({type:"list_start",ordered:o.length>1}),s=s[0].match(this.rules.item),r=!1,c=s.length,l=0;for(;l<c;l++)a=s[l],f=a.length,a=a.replace(/^ *([*+-]|\d+\.) +/,""),~a.indexOf("\n ")&&(f-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+f+"}","gm"),"")),this.options.smartLists&&l!==c-1&&(u=this.rules.bullet.exec(s[l+1])[0],o!==u&&!(o.length>1&&u.length>1)&&(e=s.slice(l+1).join("\n")+e,l=c-1)),i=r||/\n\n(?!\s*$)/.test(a),l!==c-1&&(r=a.charAt(a.length-1)==="\n",i||(i=r)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(a,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"});continue}if(s=this.rules.html.exec(e)){e=e.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&(s[1]==="pre"||s[1]==="script"||s[1]==="style"),text:s[0]});continue}if(!n&&t&&(s=this.rules.def.exec(e))){e=e.substring(s[0].length),this.tokens.links[s[1].toLowerCase()]={href:s[2],title:s[3]};continue}if(t&&(s=this.rules.table.exec(e))){e=e.substring(s[0].length),a={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/(?: *\| *)?\n$/,"").split("\n")};for(l=0;l<a.align.length;l++)/^ *-+: *$/.test(a.align[l])?a.align[l]="right":/^ *:-+: *$/.test(a.align[l])?a.align[l]="center":/^ *:-+ *$/.test(a.align[l])?a.align[l]="left":a.align[l]=null;for(l=0;l<a.cells.length;l++)a.cells[l]=a.cells[l].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(a);continue}if(t&&(s=this.rules.paragraph.exec(e))){e=e.substring(s[0].length),this.tokens.push({type:"paragraph",text:s[1].charAt(s[1].length-1)==="\n"?s[1].slice(0,-1):s[1]});continue}if(s=this.rules.text.exec(e)){e=e.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});continue}if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}return this.tokens},marked.Parser.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"clswrapper":return this.renderer.clswrapper(this.token.cls,this.token.text,this.token.escaped);case"table":var e="",t="",n,r,i,s,o;i="";for(n=0;n<this.token.header.length;n++)s={header:!0,align:this.token.align[n]},i+=this.renderer.tablecell(this.inline.output(this.token.header[n]),{header:!0,align:this.token.align[n]});e+=this.renderer.tablerow(i);for(n=0;n<this.token.cells.length;n++){r=this.token.cells[n],i="";for(o=0;o<r.length;o++)i+=this.renderer.tablecell(this.inline.output(r[o]),{header:!1,align:this.token.align[o]});t+=this.renderer.tablerow(i)}return this.renderer.table(e,t);case"blockquote_start":var t="";while(this.next().type!=="blockquote_end")t+=this.tok();return this.renderer.blockquote(t);case"list_start":var t="",u=this.token.ordered;while(this.next().type!=="list_end")t+=this.tok();return this.renderer.list(t,u);case"list_item_start":var t="";while(this.next().type!=="list_item_end")t+=this.token.type==="text"?this.parseText():this.tok();return this.renderer.listitem(t);case"loose_item_start":var t="";while(this.next().type!=="list_item_end")t+=this.tok();return this.renderer.listitem(t);case"html":var a=!this.token.pre&&!this.options.pedantic?this.inline.output(this.token.text):this.token.text;return this.renderer.html(a);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},_.extend(marked.Renderer.prototype,{clswrapper:function(e,t){return'<div class="'+e+'">'+marked.Parser.parse(marked.Lexer.lex(t,this.options),this.options)+"</div>\n"}})}(),function(e,t,n,r,i){t.each(["document","window"],function(t){window["$"+t]=e(window[t])}),t.each(["body","head"],function(t){window["$"+t]=e(t)}),n.registerHelpers(),t.isPlainObject=function(e){return t.isObject(e)&&!t.isFunction(e)&&!t.isArray(e)&&!t.isElement(e)},t.string=r,window.app=window.Application=new i.Application,t.each(["Core","Util"],function(e){Application.module(e)})}(jQuery,_,Swag,s,Marionette),function(e){e.setup=function(t){function n(t){t=_.compact(String(t).split("/"));if(t.length<=0)throw new Error("DEV::Application::navigate() Navigation path empty...");var n=t.shift();if(!n)throw new Error("DEV::Application::navigate() Empty context/view name...");var r=e.get(n,"Context",!0);if(!r)throw new Error("DEV::Application::navigate() You must have the required context/view "+n+" defined...");if(!e.currentContext||e.currentContext.name!==n){var i=new r,s;i.guard&&(s=i.guard());if(s){e.trigger("app:context-guard-error",s,i.name);return}if(i.onBeforeNavigateTo&&!i.onBeforeNavigateTo()){e.trigger("app:navigation-aborted",i.name);return}e.currentContext&&e.currentContext.trigger("context:navigate-away"),e.Util.addMetaEvent(i,"context");var o=e.config.navRegion||e.config.contextRegion,u=e.mainView.getRegion(o);if(!u)throw new Error("DEV::Application::navigate() You don't have region '"+o+"' defined");u.once("show",function(){e.currentContext=i,e.trigger("app:context-switched",e.currentContext.name),e.coop("context-switched",e.currentContext.name),e.currentContext.trigger("context:navigate-chain",t)}),u.show(i)}else e.currentContext.trigger("context:navigate-chain",t,!0)}if(e.config){_.extend(e.config,t);return}return e.config=_.extend({template:undefined,layout:undefined,data:undefined,actions:undefined,contextRegion:"contexts",defaultContext:undefined,icings:{},fullScreen:!1,websockets:[],baseAjaxURI:"",viewTemplates:"static/template",viewSrcs:undefined,i18nResources:"static/resource",i18nTransFile:"i18n.json",i18nLocale:"",rapidEventDelay:200,timeout:3e5,marked:{gfm:!0,tables:!0,breaks:!0,pedantic:!1,sanitize:!0,smartLists:!0,smartypants:!1},hljs:{languages:["c","python","javascript","html","css"]}},t),e.Util.addMetaEvent(e,"app"),e.onNavigate=function(t,r){if(!e.available()){e.trigger("app:locked",t);return}var i="",s=t||"";_.isString(s)?i=s:i=_.string.rtrim([s.context||e.currentContext.name,s.module||s.subpath].join("/"),"/"),r||e.hybridEvent?n(i):window.location.hash="navigate/"+i},e.onContextGuardError=function(e,t){console.error("DEV:Context-Guard-Error:",t,e)},e.on("app:initialized",function(t){e.addRegions({"region-app":'[region="app"]'}),e.trigger("app:before-mainview-ready"),e.config.layout?e.mainView=e.mainView||e.view({name:"Main",data:e.config.data,actions:e.config.actions,layout:e.config.layout},!0):e.mainView=e.mainView||e.view({name:"Main",data:e.config.data,actions:e.config.actions,template:e.config.template||'<div region="'+(e.config.navRegion||e.config.contextRegion)+'"></div>'},!0),e.getRegion("region-app").show(e.mainView).$el.css({height:"100%",width:"100%"}),e.trigger("app:mainview-ready");var n={};_.each(_.extend({},e.config.icings,e.config.curtains),function(e,t){if(t==="app")return;var r=_.uniqueId("app-icing-");$body.append($('<div id="'+r+'" style="position:fixed"></div>').css(e).hide()),n[["icing","region",t].join("-")]="#"+r}),e.addRegions(n),e.icing=function(t,n){var r=e.getRegion(["icing","region",t].join("-"));return r.ensureEl(),n===!1?r.$el.hide():r.$el.show(),r},e.curtain=e.icing;var r=Backbone.Marionette.AppRouter.extend({appRoutes:{"navigate/*path":"navigateTo"},controller:{navigateTo:function(t){e.navigate(t,!0)}}});e.router=new r,Backbone.history&&Backbone.history.start(),!window.location.hash&&e.config.defaultContext&&e.navigate(e.config.defaultContext)}),e},e.run=function(t){function n(){function t(t,r){var i={h:$window.height(),w:$window.width()};if(!n(i))return;e.screenSize=i,e.config.fullScreen&&($body.height(i.h),$body.width(i.w)),r||(e.trigger("app:resized",i),e.coop("window-resized",i))}function n(e){return e.h>0&&e.w>0}function r(){var t=$window.scrollTop();e.trigger("app:scroll",t),e.coop("window-scroll",t)}Modernizr.mobile&&FastClick.attach(document.body),$window.on("resize",e.debounce(t)),e._ensureScreenSize=function(n){t(),e.screenSize?n():_.delay(e._ensureScreenSize,e.config.rapidEventDelay/4,n)},e.config.layout&&(e.config.fullScreen=!0),e.config.fullScreen&&$body.css({overflow:"hidden",margin:0,padding:0}),$window.on("scroll",e.throttle(r));var i=e.uri(window.location.toString()).search(!0).theme||e.config.theme;i&&console.warn("DEV::Application::theme is now deprecated, please use theme css directly in <head>"),e.addInitializer(function(){return e.inject.tpl("all.json")}),e.addInitializer(function(){return I18N.init({locale:e.config.i18nLocale,resourcePath:e.config.i18nResources,translationFile:e.config.i18nTransFile})}),_.each(e.config.websockets,function(t){e.ws(t)}),e._ensureScreenSize(function(){e.start()})}return t=t===!0?"deviceready":t,t?(e.hybridEvent=t,window.onerror=function(t,n,r){e.trigger("app:error",{errorMsg:t,target:n,lineNum:r})},e.onError=function(e,t,n){console.error(e,t,n)},document.addEventListener("touchmove",function(e){e.target.classList.contains("scrollable")||e.preventDefault()},!1),document.addEventListener(t,function(){$document.ready(n)},!1)):$document.ready(n),e}}(Application),function(e){e.create=function(t,n){console.warn("DEV::Application::create() method is deprecated, use methods listed in ",e._apis," for alternatives")},_.extend(e,{view:function(t,n){if(_.isString(t)){if(_.isBoolean(n)&&n)return e.Core.View.create(t);if(_.isPlainObject(n))return e.Core.View.register(t,n)}if(_.isPlainObject(t)){var r=n;n=t;var i=n.name?e.Core.View.register(n):Backbone.Marionette[n.type||"Layout"].extend(n);return _.isBoolean(r)&&r?new i:i}return e.Core.View.get(t)},context:function(t,n){if(!n){if(_.isString(t)||!t)return e.Core.Context.get(t);n=t}else _.extend(n,{name:t});return e.Core.Context.register(n)},widget:function(t,n){return n?_.isFunction(n)?e.Core.Widget.register(t,n):e.Core.Widget.create(t,n):e.Core.Widget.get(t)},editor:function(t,n){return n?_.isFunction(n)?e.Core.Editor.register(t,n):e.Core.Editor.create(t,n):e.Core.Editor.get(t)},regional:function(t,n){return n=n||{},_.isString(t)?_.extend(n,{name:t}):_.extend(n,t),console.warn("DEV::Application::regional() method is deprecated, use .view() instead for",n.name||n),e.view(n,!n.name)},has:function(t,n){return n?e.Core[n]&&e.Core[n].has(t):(_.each(["Context","View","Widget","Editor"],function(r){!n&&e.Core[r].has(t)&&(n=r)}),n)},get:function(t,n,r){if(!t)return{Context:e.Core.Context.get(),View:e.Core.View.get(),Widget:e.Core.Widget.get(),Editor:e.Core.Editor.get()};var i,s=n||"View";return i=e.Core[s]&&e.Core[s].get(t)||r&&e.Core.View.get(t),!i&&e.config&&e.config.viewSrcs&&e.inject.js(_.compact([e.config.viewSrcs,s.toLowerCase(),e.nameToPath(t)]).join("/")+".js",!0).done(function(){e.debug(s,t,"injected","from",e.config.viewSrcs),i=e.get(t,s)}).fail(function(n,o,u){if(!r||s==="View")throw new Error("DEV::Application::get() can NOT load definition for "+t+" - ["+u+"]");i=e.get(t,"View")}),i},coop:function(t,n){return e.trigger("app:coop",t,n),e.trigger("app:coop-"+t,n),e},pathToName:function(e){if(!_.isString(e))throw new Error("DEV::Application::pathToName() You must pass in a valid path string.");return _.contains(e,".")?e:e.split("/").map(_.string.humanize).map(_.string.classify).join(".")},nameToPath:function(e){if(!_.isString(e))throw new Error("DEV::Application::nameToPath() You must pass in a Reusable view name.");return _.contains(e,"/")?e:e.split(".").map(_.string.humanize).map(_.string.slugify).join("/")},navigate:function(t,n){return e.trigger("app:navigate",t,n)},lock:function(t){return e.Core.Lock.lock(t)},unlock:function(t){return e.Core.Lock.unlock(t)},available:function(t){return e.Core.Lock.available(t)},remote:function(t,n,r){return t=t||{},t.payload||n?(n=t.payload||n,e.Core.Remote.change(t,_.extend({payload:n},r))):e.Core.Remote.get(t,r)},download:function(t){return e.Util.download(t)},_websockets:{},ws:function(t){if(!Modernizr.websockets)throw new Error("DEV::Application::ws() Websocket is not supported by your browser!");t=t||"/ws";var n=$.Deferred();return e._websockets[t]?n.resolve(e._websockets[t]):(e._websockets[t]=new WebSocket("ws://"+location.host+t),e._websockets[t].json=function(n){e._websockets[t].send(JSON.stringify(n))},e._websockets[t].channel=function(n){return{json:function(r){e._websockets[t].json({channel:n,payload:r})}}},e._websockets[t].onclose=function(){e._websockets[t]=undefined},e._websockets[t].onopen=function(){return n.resolve(e._websockets[t])},e._websockets[t].onmessage=function(n){e.trigger("app:ws-data",{websocket:e._websockets[t],path:t,raw:n.data});try{var r=JSON.parse(n.data);e.coop("ws-data-"+r.channel,{websocket:e._websockets[t],path:t,data:r.payload})}catch(i){console.warn("DEV::Application::ws() Websocket is getting non-default {channel: ..., payload: ...} json contract strings...")}}),n.promise()},_polls:{},poll:function(t,n,r){if(t===!1)return _.each(this._polls,function(e){e.cancel()});var i;if(_.isString(n)){i=e.later.parse.text(n);if(i.error!==-1)throw new Error("DEV::Application::poll() occurrence string unrecognizable...")}else _.isPlainObject(n)?i=n:i=Number(n);var s=t;_.isPlainObject(s)&&(s=[s.url,_.reduce(_.map(s.params||s.querys,function(e,t){return[t,e].join("=")}).sort(),function(e,t){return[t,e].join("&")},"")].join("?"));if(n===!1){if(this._polls[s])return this._polls[s].cancel();console.warn("DEV::Application::poll() No polling card registered yet for "+s);return}this._polls[s]&&this._polls[s].cancel();if(!n||!r)throw new Error("DEV::Application::poll() You must specify an occurrence and a coop event or callback...");var o={_key:s,url:t,eof:r,timerId:"unknown",failed:0,valid:!0};this._polls[s]=o;var u=_.isNumber(i)?window.setTimeout:e.later.setTimeout,a=function(){e.remote(t).done(function(t){_.isFunction(o.eof)?o.eof(t,o):e.coop(o.eof,t,o)}).fail(function(){o.failed++,o.failed>=3&&o.cancel()}).always(function(){o.valid&&(o.timerId=u(a,i))})};o.timerType=u===window.setTimeout?"native":"later.js",o.timerId=u(a,i);var f=this;o.cancel=function(){this.timerType==="native"?window.clearTimeout(this.timerId):this.timerId.clear(),this.valid=!1,delete f._polls[this._key]}},dispatcher:function(e){var t;return _.isPlainObject(e)?t=_.extend(e,Backbone.Events):t=_.clone(Backbone.Events),t.dispose=function(){this.off(),this.stopListening()},t},reactor:function(){return e.dispatcher.apply(this,arguments)},model:function(e){return new Backbone.DeepModel(e)},collection:function(e){if(e&&!_.isArray(e))throw new Error("DEV::Application::collection You need to specify an array to init a collection");return new Backbone.Collection(e)},extract:function(e,t){return selectn(e,t)},param:function(t,n){var r=URI.parseQuery(e.uri(window.location.href).search())||{};return t?r[t]||n:r},animation:function(t,n,r){var i,s=function(e){t.call(r),(!n||n&&n.call(r))&&o()},o=function(){if(i===undefined)return;i=e.nextFrame(s)},u=function(){e.cancelFrame(i),i=undefined};return{start:function(){i=-1,o()},stop:u}},nextFrame:function(e){return window.requestAnimationFrame(e)},cancelFrame:function(e){return window.cancelAnimationFrame(e)},animateItems:function(t,n,r){var i=$(t);_.isNumber(n)&&(r=n,n=undefined),n=n||"flipInX",r=r||150;var s=/In/.test(n)?1:/Out/.test(n)?-1:0;i.each(function(t,i){var o=$(i);s&&(s===1?o.css("opacity",0):o.css("opacity",1)),_.delay(function(t){var r=n+" animated";t.one(e.ADE,function(){t.removeClass(r)}).addClass(r),s&&(s===1?t.css("opacity",1):t.css("opacity",0))},t*r,o)})},throttle:function(t,n){return _.throttle(t,n||e.config.rapidEventDelay)},debounce:function(t,n){return _.debounce(t,n||e.config.rapidEventDelay)},markdown:function(t,n,r){r=r||!(n instanceof jQuery)&&n||{};var i=marked(t,e.debug("marked options are",_.extend(e.config.marked,r.marked&&r.marked||r,n instanceof jQuery&&n.data("marked")))),s=window.hljs;if(s){s.configure(e.debug("hljs options are",_.extend(e.config.hljs,r.hljs,n instanceof jQuery&&n.data("hljs"))));var o=$("<div>"+i+"</div>");o.find("pre code").each(function(){s.highlightBlock(this)}),i=o.html()}return n instanceof jQuery?n.html(i).addClass("md-content"):i},notify:function(t,n,r,i){_.isString(t)?(_.isPlainObject(r)&&(i=r,r=undefined),i&&i.icon?$.amaran(_.extend({theme:"awesome "+(r||"ok"),content:{title:t,message:n,info:i.more||" ",icon:i.icon}},i)):$.amaran(_.extend({content:{themeName:"stagejs",title:t,message:n,type:r||"info"},themeTemplate:e.NOTIFYTPL},i))):$.amaran(t)},prompt:function(t,n,r,i){return _.isFunction(t)?t=new t:_.isString(t)&&(t=new(e.get(t))),_.isString(r)?(i=i||{},i.placement=r,t.popover(n,i)):(i=r,t.overlay(n,i))},i18n:function(e,t){return e?_.isPlainObject(e)?I18N.insertTrans(e):String(e).i18n(t):I18N.getResourceJSON(null,!1)},debug:function(){var t=console.debug||console.log;return e.param("debug")==="true"&&t.apply(console,arguments),arguments.length&&arguments[arguments.length-1]},locate:function(t){if(!_.isString(t)){var n;return t?n=$(t).find("[data-view-name]"):n=$("[data-view-name]"),n=n.map(function(e,t){return $(t).attr("data-view-name")}).get(),n}var r=$('[data-view-name="'+t+'"]').data("view");return r&&{view:r,"sub-views":e.locate(r.$el)}},profile:function(t){if(!_.isString(t)){var n;return t?n=$(t).find("[data-render-count]"):n=$("[data-render-count]"),n=n.map(function(e,t){var n=$(t);return{name:n.data("view-name"),"render-count":Number(n.data("render-count")),$el:n}}).get(),{total:_.reduce(n,function(e,t){return e+t["render-count"]},0),rankings:_.sortBy(n,"render-count").reverse()}}var r=e.locate(t),i;return r&&(i=r.view),i&&{name:i.$el.data("view-name"),"render-count":i.$el.data("render-count"),$el:i.$el,"sub-views":e.profile(i.$el)}},mark:function(t){var n=[],r;if(_.isString(t)){var i=e.locate(t);if(!i)return;r=i.view.parentRegion.$el}else t?r=$(t):r=$("body");r.find(".dev-support-view-name-tag").remove(),_.each(e.locate(r),function(t){var i=e.locate(t),s;i.view.category!=="Editor"?s=i.view.parentRegion.$el:s=i.view.$el,s.css({padding:"1.5em",border:"1px dashed black"});var o=$('<span class="label label-default dev-support-view-name-tag" style="position:absolute;">'+i.view.$el.data("view-name")+"</span>");o.css({cursor:"pointer"}).on("click",function(){e.reload(i.view.$el.data("view-name"),!0)}),r.append(o),n.push({$tag:o,$ct:s,view:i.view})}),$window.trigger("resize"),_.defer(function(){_.each(n,function(e){e.$tag.position({my:"left top",at:"left top",of:e.$ct}),e.view.on("close",function(){e.$tag.remove()})})})},reload:function(t,n){if(!t)return window.location.reload();var r=e.locate(t);if(!r)throw e.mark(),new Error("DEV::app.reload():: Can NOT find view with given name: "+t);var i=r.view,s=i.parentRegion,o;_.each(e.get(),function(e,n){if(e.indexOf(t)>=0){o=n;return}});if(!o)throw new Error("DEV::app.reload():: No category can be found with given view: "+t);n=n||!1;if(n){e.Util.Tpl.cache.clear(i.template),e.Core[o].remove(t);try{var u=new(e.get(t,o));u.once("view:all-region-shown",function(){e.mark(t)}),s.show(u)}catch(a){console.warn("DEV::app.reload()::Abort, this",t,"view is not defined alone, you need to find its source.",a)}}else i.refresh()},inject:{js:function(){return e.Util.inject.apply(null,arguments)},tpl:function(){return e.Util.Tpl.remote.apply(e.Util.Tpl,arguments)},css:function(){return loadCSS.apply(null,arguments)}},cookie:Cookies,store:store.enabled&&store,validator:validator,moment:moment,uri:URI,later:later}),e.editor.validator=e.editor.rule=function(t,n){if(!_.isString(t))throw new Error("DEV::Validator:: You must specify a validator/rule name to use.");return e.Core.Editor.addRule(t,n)},e.page=e.context,e.area=e.regional,e._apis=["dispatcher/reactor","model","collection","context - @alias:page","view","widget","editor","editor.validator - @alias:editor.rule","lock","unlock","available","has","get","coop","navigate","icing/curtain","i18n","param","animation","nextFrame","cancelFrame","animateItems","throttle","debounce","remote","download","ws","poll","extract","markdown","notify","prompt","cookie","store","moment","uri","validator","later","debug","reload","locate","profile","mark","nameToPath","pathToName","inject.js","inject.tpl","inject.css","create - @deprecated","regional - @deprecated"],e.ADE="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",e.NOTIFYTPL=Handlebars.compile('<div class="alert alert-dismissable alert-{{type}}"><button data-dismiss="alert" class="close" type="button">×</button><strong>{{title}}</strong> {{{message}}}</div>')}(Application),function(e){e.Util.metaEventToListenerName=function(e){if(!e)throw new Error("DEV::Util::metaEventToListenerName() e an NOT be empty...");return _.string.camelize("on-"+e.split(/[\.:-\s\/]/).join("-"))},e.Util.addMetaEvent=function(t,n,r){r||(r=t),t.listenTo(t,"all",function(i){var s=String(i).split(":");if(s.length!==2||s[0]!==n)return;var o=e.Util.metaEventToListenerName(s[1]);r[o]&&r[o].apply(t,_.toArray(arguments).slice(1))})}}(Application),function(e){function t(t){var n=$("#hidden-download-iframe");n.length>0||($("body").append('<iframe id="hidden-download-iframe" style="display:none"></iframe>'),n=$("#hidden-download-iframe")),_.isString(t)&&(t={url:t}),n.attr("src",e.uri(t.url||"/").addQuery(_.omit(t,"url")).toString())}e.Util.download=t}(Application),function(e){var t=/[\.\/]/,n={normalizeId:function(e){return String(e).split(t).join("-")},cache:Backbone.Marionette.TemplateCache,build:function(e,t){arguments.length===1&&(t=e,e=null);var n=_.isArray(t)?t.join(""):t;if(e){var r=this.normalizeId(e),i=$('head > script[id="'+r+'"]');i.length>0?(i.html(n),this.cache.clear("#"+e),console.warn("DEV::Overriden::Template::",e)):$("head").append(['<script type="text/tpl" id="',r,'">',n,"</script>"].join(""))}return n},remote:function(t,r,i){var s=this;_.string.startsWith(t,"@")&&(t=t.substr(1));if(!t)throw new Error("DEV::Util.Tpl::remote() your template name can NOT be empty!");_.isBoolean(r)&&(i=r,r=undefined);var o=(r||e.config.viewTemplates)+"/"+t;return _.string.endsWith(t,".json")?$.ajax({url:o,dataType:"json",async:!i}).done(function(e){_.each(e,function(e,t){n.cache.make(t,e)})}):$.ajax({url:o,dataType:"html",async:!i}).done(function(e){n.cache.make(t,e)}).fail(function(){throw new Error("DEV::Util.Tpl::remote() Can not load template..."+o+", re-check your app.config.viewTemplates setting")})}};e.Util.Tpl=n}(Application),function(e){e.Util.inject=function(t,n){return t=t||"patch.json",_.string.endsWith(t,".js")?$.ajax({url:t,async:!n,dataType:"script"}):$.getJSON(t,function(t){var r="";_.isArray(t)||(r=t.base,t=t.list),_.each(t,function(t){e.Util.inject((_.string.endsWith(r,"/")?r:r?r+"/":"")+t,n)})})}}(Application),function(e,t,n){function i(n,r){if(!n)throw new Error("DEV::Core.Remote::options empty, you need to pass in at least a url string");t.isString(n)&&(n=t.extend(r||{},{url:n})),t.extend(n,r||{},{type:undefined,data:undefined,processData:!1,contentType:"application/json; charset=UTF-8",timeout:e.config.timeout});if(n.entity||n._entity){var i=n.entity||n._entity;n.url=i}n.payload&&n.payload._id&&(n._id=n.payload._id);if(n._id||n._method){var s=e.uri(n.url);n.url=s.path(t.compact([s.path(),n._id,n._method]).join("/")).toString()}return n.params=t.extend(n.params||{},n.querys),n.params&&(n.url=e.uri(n.url).search(n.params).toString()),e.trigger("app:ajax",n),n}var r=e.module("Core.Remote");t.extend(r,{get:function(t,r){return t=i(t,r),t.type="GET",e.trigger("app:remote-pre-get",t),n.ajax(t)},change:function(r,s){r=i(r,s);if(!r.payload)throw new Error("DEV::Core.Remote::payload empty, please use GET");return r.payload._id&&t.size(r.payload)===1?r.type="DELETE":(t.isObject(r.payload)||(r.payload={payload:r.payload}),r.payload._id?r.type="PUT":r.type="POST"),r.type!=="DELETE"&&(r.data=JSON.stringify(r.payload)),e.trigger("app:remote-pre-change",r),n.ajax(r)}}),$document.ajaxSend(function(t,n,r){e.trigger("app:ajax-start",t,n,r)}),$document.ajaxComplete(function(t,n,r){e.trigger("app:ajax-stop",t,n,r)}),$document.ajaxSuccess(function(t,n,r,i){e.trigger("app:ajax-success",t,n,r,i)}),$document.ajaxError(function(t,n,r,i){e.trigger("app:ajax-error",t,n,r,i)}),$document.ajaxStart(function(){e.trigger("app:ajax-active")}),$document.ajaxStop(function(){e.trigger("app:ajax-inactive")}),e.onAjax=function(n){e.config.baseAjaxURI&&(n.url=n.url.match(/^[\/\.]/)?n.url:[e.config.baseAjaxURI,n.url].join("/"));var r=n.xdomain;r&&(n.url=(r.protocol||"http")+"://"+(r.host||"localhost")+(r.port&&":"+r.port||"")+(/^\//.test(n.url)?n.url:"/"+n.url),n.crossDomain=!0,n.xhrFields=t.extend(n.xhrFields||{},{withCredentials:!0}),n.headers=t.extend(n.headers||{},r.headers)),Modernizr.ie&&(n.cache=!1)}}(Application,_,jQuery),function(e){var t=e.module("Core.Lock"),n={},r=!1;_.extend(t,{create:function(e,t){if(!_.isString(e)||!e)throw new Error("DEV::Core.Lock::create() You must give this lock a name/topic ...");return n[e]?!1:(t=_.isNumber(t)?t||1:1,n[e]={current:t,allowance:t},!0)},get:function(e){return!e||e==="*"?{global:r,locks:n}:n[e]},lock:function(e){return r?!1:!e||e==="*"?r?!1:(r=!0,!0):_.isUndefined(n[e])?(this.create(e,1),this.lock(e)):n[e].current>0?(n[e].current--,!0):!1},unlock:function(e){!e||e==="*"?r&&(r=!1):_.isUndefined(n[e])||n[e].current<n[e].allowance&&n[e].current++},available:function(e){if(r)return!1;if(!e||e==="*")return r===!1;var t=this.get(e);return t?t.current>0:!0}})}(Application),function(e,t,n){function r(r){r=e.string.classify(r);var i=t.module("Core."+r);return e.extend(i,{map:{},has:function(n){if(!e.isString(n)||!n)throw new Error("DEV::Reusable::has() You must specify the name of the "+r+" to look for.");return this.map[n]?n:(n=t.pathToName(n),this.map[n]?n:undefined)},register:function(i,s){var o;e.isPlainObject(i)?(o=i,i=o.name,e.extend(o,{className:r.toLowerCase()+" "+e.string.slugify(r+"-"+o.name)+" "+(o.className||"")}),s=function(){return n[o.type||"Layout"].extend(o)}):e.isPlainObject(s)&&(o=e.extend({name:i},s),s=function(){return n[o.type||"Layout"].extend(o)});if(!e.isString(i)||!i)throw new Error("DEV::Reusable::register() You must specify a "+r+" name to register.");if(!e.isFunction(s))throw new Error("DEV::Reusable::register() You must specify a "+r+" factory function to register "+i+" !");return this.has(i)&&console.warn("DEV::Overriden::Reusable "+r+"."+i),this.map[i]=s(),this.map[i].prototype.name=i,this.map[i].prototype.category=r,t.trigger("app:reusable-registered",this.map[i],r),t.coop("reusable-registered",this.map[i],r),this.map[i]},create:function(t,n){if(!e.isString(t)||!t)throw new Error("DEV::Reusable::create() You must specify the name of the "+r+" to create.");var i=this.get(t);if(i)return new i(n||{});throw new Error("DEV::Reusable::create() Required definition ["+t+"] in "+r+" not found...")},get:function(t){if(!t)return e.keys(this.map);t=this.has(t);if(t)return this.map[t]},alter:function(e,t){var n=this.get(e);if(n)return n=n.extend(t),n;throw new Error("DEV::Reusable::alter() Required definition ["+e+"] in "+r+" not found...")},remove:function(e){e&&delete this.map[e]}}),i}r("Context"),r("Regional"),t.Core.View=t.Core.Regional,r("Widget"),r("Editor")}(_,Application,Marionette),function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){window.Backbone=window.Backbone||{},window.Backbone.DeepModel=e(".")},{".":20}],2:[function(e,t,n){function p(e){return e&&typeof e=="object"||!1}function v(e,t){return s(e,t,c)}function m(e,t,n,r,s){if(!b(e))return e;var o=y(t.length)&&(a(t)||l(t));return(o?i:v)(t,function(t,i,u){if(p(t))return r||(r=[]),s||(s=[]),g(e,u,i,m,n,r,s);var a=e[i],f=n?n(a,t,i,e,u):undefined,l=typeof f=="undefined";l&&(f=t),(o||typeof f!="undefined")&&(l||(f===f?f!==a:a===a))&&(e[i]=f)}),e}function g(e,t,n,i,s,o,c){var p=o.length,d=t[n];while(p--)if(o[p]==d){e[n]=c[p];return}var v=e[n],m=s?s(v,d,n,e,t):undefined,g=typeof m=="undefined";g&&(m=d,y(d.length)&&(a(d)||l(d))?m=a(v)?v:v?r(v):[]:f(d)||u(d)?m=u(v)?h(v):f(v)?v:{}:g=!1),o.push(d),c.push(m);if(g)e[n]=i(m,d,s,o,c);else if(m===m?m!==v:v===v)e[n]=m}function y(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=d}function b(e){var t=typeof e;return t=="function"||e&&t=="object"||!1}var r=e("lodash._arraycopy"),i=e("lodash._arrayeach"),s=e("lodash._basefor"),o=e("lodash._createassigner"),u=e("lodash.isarguments"),a=e("lodash.isarray"),f=e("lodash.isplainobject"),l=e("lodash.istypedarray"),c=e("lodash.keys"),h=e("lodash.toplainobject"),d=Math.pow(2,53)-1,w=o(m);t.exports=w},{"lodash._arraycopy":3,"lodash._arrayeach":4,"lodash._basefor":5,"lodash._createassigner":6,"lodash.isarguments":9,"lodash.isarray":10,"lodash.isplainobject":11,"lodash.istypedarray":14,"lodash.keys":15,"lodash.toplainobject":17}],3:[function(e,t,n){function r(e,t){var n=-1,r=e.length;t||(t=Array(r));while(++n<r)t[n]=e[n];return t}t.exports=r},{}],4:[function(e,t,n){function r(e,t){var n=-1,r=e.length;while(++n<r)if(t(e[n],n,e)===!1)break;return e}t.exports=r},{}],5:[function(e,t,n){function r(e,t,n){var r=-1,s=i(e),o=n(e),u=o.length;while(++r<u){var a=o[r];if(t(s[a],a,s)===!1)break}return e}function i(e){return s(e)?e:Object(e)}function s(e){var t=typeof e;return t=="function"||e&&t=="object"||!1}t.exports=r},{}],6:[function(e,t,n){function s(e){return function(){var t=arguments,n=t.length,s=t[0];if(n<2||s==null)return s;var o=t[n-2],u=t[n-1],a=t[3];n>3&&typeof o=="function"?(o=r(o,u,5),n-=2):(o=n>2&&typeof u=="function"?u:null,n-=o?1:0),a&&i(t[1],t[2],a)&&(o=n==3?null:o,n=2);var f=0;while(++f<n){var l=t[f];l&&e(s,l,o)}return s}}var r=e("lodash._bindcallback"),i=e("lodash._isiterateecall");t.exports=s},{"lodash._bindcallback":7,"lodash._isiterateecall":8}],7:[function(e,t,n){function r(e,t,n){if(typeof e!="function")return i;if(typeof t=="undefined")return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)};case 5:return function(n,r,i,s,o){return e.call(t,n,r,i,s,o)}}return function(){return e.apply(t,arguments)}}function i(e){return e}t.exports=r},{}],8:[function(e,t,n){function i(e,t){return e=+e,t=t==null?r:t,e>-1&&e%1==0&&e<t}function s(e,t,n){if(!u(n))return!1;var r=typeof t;if(r=="number")var s=n.length,a=o(s)&&i(t,s);else a=r=="string"&&t in n;if(a){var f=n[t];return e===e?e===f:f!==f}return!1}function o(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=r}function u(e){var t=typeof e;return t=="function"||e&&t=="object"||!1}var r=Math.pow(2,53)-1;t.exports=s},{}],9:[function(e,t,n){function i(e){return e&&typeof e=="object"||!1}function a(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=u}function f(e){var t=i(e)?e.length:undefined;return a(t)&&o.call(e)==r||!1}var r="[object Arguments]",s=Object.prototype,o=s.toString,u=Math.pow(2,53)-1;t.exports=f},{}],10:[function(e,t,n){function a(e){return typeof e=="string"?e:e==null?"":e+""}function f(e){return e&&typeof e=="object"||!1}function m(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=v}function y(e){return e==null?!1:h.call(e)==i?p.test(c.call(e)):f(e)&&s.test(e)||!1}function b(e){return e=a(e),e&&u.test(e)?e.replace(o,"\\$&"):e}var r="[object Array]",i="[object Function]",s=/^\[object .+?Constructor\]$/,o=/[.*+?^${}()|[\]\/\\]/g,u=RegExp(o.source),l=Object.prototype,c=Function.prototype.toString,h=l.toString,p=RegExp("^"+b(h).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),d=y(d=Array.isArray)&&d,v=Math.pow(2,53)-1,g=d||function(e){return f(e)&&m(e.length)&&h.call(e)==r||!1};t.exports=g},{}],11:[function(e,t,n){function u(e){return e&&typeof e=="object"||!1}function h(e,t){return r(e,t,s)}function p(e){var t;if(!u(e)||l.call(e)!=o||!f.call(e,"constructor")&&(t=e.constructor,typeof t=="function"&&!(t instanceof t)))return!1;var n;return h(e,function(e,t){n=t}),typeof n=="undefined"||f.call(e,n)}var r=e("lodash._basefor"),i=e("lodash.isnative"),s=e("lodash.keysin"),o="[object Object]",a=Object.prototype,f=a.hasOwnProperty,l=a.toString,c=i(c=Object.getPrototypeOf)&&c,d=c?function(e){if(!e||l.call(e)!=o)return!1;var t=e.valueOf,n=i(t)&&(n=c(t))&&c(n);return n?e==n||c(e)==n:p(e)}:p;t.exports=d},{"lodash._basefor":5,"lodash.isnative":12,"lodash.keysin":13}],12:[function(e,t,n){function u(e){return typeof e=="string"?e:e==null?"":e+""}function a(e){return e&&typeof e=="object"||!1}function p(e){return e==null?!1:c.call(e)==r?h.test(l.call(e)):a(e)&&i.test(e)||!1}function d(e){return e=u(e),e&&o.test(e)?e.replace(s,"\\$&"):e}var r="[object Function]",i=/^\[object .+?Constructor\]$/,s=/[.*+?^${}()|[\]\/\\]/g,o=RegExp(s.source),f=Object.prototype,l=Function.prototype.toString,c=f.toString,h=RegExp("^"+d(c).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=p},{}],13:[function(e,t,n){function l(e,t){return e=+e,t=t==null?a:t,e>-1&&e%1==0&&e<t}function c(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=a}function h(e){var t=typeof e;return t=="function"||e&&t=="object"||!1}function p(e){if(e==null)return[];h(e)||(e=Object(e));var t=e.length;t=t&&c(t)&&(i(e)||f.nonEnumArgs&&r(e))&&t||0;var n=e.constructor,s=-1,u=typeof n=="function"&&n.prototype===e,a=Array(t),p=t>0;while(++s<t)a[s]=s+"";for(var d in e)(!p||!l(d,t))&&(d!="constructor"||!u&&!!o.call(e,d))&&a.push(d);return a}var r=e("lodash.isarguments"),i=e("lodash.isarray"),s=Object.prototype,o=s.hasOwnProperty,u=s.propertyIsEnumerable,a=Math.pow(2,53)-1,f={};(function(e){try{f.nonEnumArgs=!u.call(arguments,1)}catch(t){f.nonEnumArgs=!0}})(0,0),t.exports=p},{"lodash.isarguments":9,"lodash.isarray":10}],14:[function(e,t,n){function k(e){return e&&typeof e=="object"||!1}function M(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=O}function _(e){return k(e)&&M(e.length)&&C[A.call(e)]||!1}var r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",u="[object Error]",a="[object Function]",f="[object Map]",l="[object Number]",c="[object Object]",h="[object RegExp]",p="[object Set]",d="[object String]",v="[object WeakMap]",m="[object ArrayBuffer]",g="[object Float32Array]",y="[object Float64Array]",b="[object Int8Array]",w="[object Int16Array]",E="[object Int32Array]",S="[object Uint8Array]",x="[object Uint8ClampedArray]",T="[object Uint16Array]",N="[object Uint32Array]",C={};C[g]=C[y]=C[b]=C[w]=C[E]=C[S]=C[x]=C[T]=C[N]=!0,C[r]=C[i]=C[m]=C[s]=C[o]=C[u]=C[a]=C[f]=C[l]=C[c]=C[h]=C[p]=C[d]=C[v]=!1;var L=Object.prototype,A=L.toString,O=Math.pow(2,53)-1;t.exports=_},{}],15:[function(e,t,n){function h(e,t){return e=+e,t=t==null?l:t,e>-1&&e%1==0&&e<t}function p(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=l}function d(e){var t=g(e),n=t.length,s=n&&e.length,o=s&&p(s)&&(i(e)||c.nonEnumArgs&&r(e)),a=-1,f=[];while(++a<n){var l=t[a];(o&&h(l,s)||u.call(e,l))&&f.push(l)}return f}function v(e){var t=typeof e;return t=="function"||e&&t=="object"||!1}function g(e){if(e==null)return[];v(e)||(e=Object(e));var t=e.length;t=t&&p(t)&&(i(e)||c.nonEnumArgs&&r(e))&&t||0;var n=e.constructor,s=-1,o=typeof n=="function"&&n.prototype===e,a=Array(t),f=t>0;while(++s<t)a[s]=s+"";for(var l in e)(!f||!h(l,t))&&(l!="constructor"||!o&&!!u.call(e,l))&&a.push(l);return a}var r=e("lodash.isarguments"),i=e("lodash.isarray"),s=e("lodash.isnative"),o=Object.prototype,u=o.hasOwnProperty,a=o.propertyIsEnumerable,f=s(f=Object.keys)&&f,l=Math.pow(2,53)-1,c={};(function(e){try{c.nonEnumArgs=!a.call(arguments,1)}catch(t){c.nonEnumArgs=!0}})(0,0);var m=f?function(e){if(e)var t=e.constructor,n=e.length;return typeof t=="function"&&t.prototype===e||typeof e!="function"&&n&&p(n)?d(e):v(e)?f(e):[]}:d;t.exports=m},{"lodash.isarguments":9,"lodash.isarray":10,"lodash.isnative":16}],16:[function(e,t,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],17:[function(e,t,n){function s(e){return r(e,i(e))}var r=e("lodash._basecopy"),i=e("lodash.keysin");t.exports=s},{"lodash._basecopy":18,"lodash.keysin":19}],18:[function(e,t,n){function r(e,t,n){n||(n=t,t={});var r=-1,i=n.length;while(++r<i){var s=n[r];t[s]=e[s]}return t}t.exports=r},{}],19:[function(e,t,n){arguments[4][13][0].apply(n,arguments)},{dup:13,"lodash.isarguments":9,"lodash.isarray":10}],20:[function(e,t,n){function u(e,t){var n={},i=c.keyPathSeparator;for(var s in e){var o=e[s];if(o&&(o.constructor===Object||!t&&o.constructor===Array)&&!r.isEmpty(o)){var a=u(o,t);for(var f in a){var l=a[f];n[s+i+f]=l}}else n[s]=o}return n}function a(e,t,n){var i=c.keyPathSeparator,s=t?t.split(i):[],o=e;n||n===!1;for(var u=0,a=s.length;u<a;u++){if(n&&!r.has(o,s[u]))return!1;o=o[s[u]],o==null&&u<a-1&&(o={});if(typeof o=="undefined")return n?!0:o}return n?!0:o}function f(e,t,n,i){i=i||{};var s=c.keyPathSeparator,o=t?t.split(s):[],u=e;for(var a=0,f=o.length;a<f&&u!==undefined;a++){var l=o[a];if(a===f-1)i.unset?delete u[l]:u[l]=n;else{if(typeof u[l]=="undefined"||!r.isObject(u[l])){var h=o[a+1];u[l]=/^\d+$/.test(h)?[]:{}}u=u[l]}}}function l(e,t){f(e,t,null,{unset:!0})}try{var r=e("underscore")}catch(i){var r=window._}try{var s=e("backbone")}catch(i){var s=window.Backbone}var o=e("lodash.merge"),c=s.Model.extend({constructor:function(e,t){var n,i=e||{};this.cid=r.uniqueId("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(i=this.parse(i,t)||{});if(n=r.result(this,"defaults"))i=o(n,i);this.set(i,t),this.changed={},this.initialize.apply(this,arguments)},toJSON:function(e){return o({},this.attributes)},get:function(e){return a(this.attributes,e)},set:function(e,t,n){var i,s,h,p,d,v,m,g;if(e==null)return this;typeof e=="object"?(s=e,n=t||{}):(s={})[e]=t,n||(n={});if(!this._validate(s,n))return!1;h=n.unset,d=n.silent,p=[],v=this._changing,this._changing=!0,v||(this._previousAttributes=o({},this.attributes),this.changed={}),g=this.attributes,m=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]),s=u(s,!0);for(i in s)t=s[i],r.isEqual(a(g,i),t)||p.push(i),r.isEqual(a(m,i),t)?l(this.changed,i):f(this.changed,i,t),h?l(g,i):f(g,i,t);if(!d){p.length&&(this._pending=!0);var y=c.keyPathSeparator,b={};for(var w=0,E=p.length;w<E;w++){var e=p[w];if(!b.hasOwnProperty(e)||!b[e])b[e]=!0,this.trigger("change:"+e,this,a(g,e),n);var S=e.split(y);for(var x=S.length-1;x>0;x--){var T=S.slice(0,x).join(y),N=T+y+"*";if(!b.hasOwnProperty(N)||!b[N])b[N]=!0,this.trigger("change:"+N,this,a(g,T),n);if(!b.hasOwnProperty(T)||!b[T])b[T]=!0,this.trigger("change:"+T,this,a(g,T),n)}}}if(v)return this;if(!d)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},clear:function(e){var t={},n=u(this.attributes);for(var i in n)t[i]=void 0;return this.set(t,r.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!r.isEmpty(this.changed):a(this.changed,e)!==undefined},changedAttributes:function(e){if(!e)return this.hasChanged()?u(this.changed):!1;var t=this._changing?this._previousAttributes:this.attributes;e=u(e),t=u(t);var n,i=!1;for(var s in e){if(r.isEqual(t[s],n=e[s]))continue;(i||(i={}))[s]=n}return i},previous:function(e){return e==null||!this._previousAttributes?null:a(this._previousAttributes,e)},previousAttributes:function(){return o({},this._previousAttributes)}});c.keyPathSeparator=".",t.exports=c},{backbone:undefined,"lodash.merge":2,underscore:undefined}]},{},[1]),function(e){_.extend(Marionette.Application.prototype,{start:function(t){this._initCallbacks.once("callbacks:all-done",function(n){e.trigger("app:initialized",t)}),this._initCallbacks.run(t,this)}})}(Application),function(e){_.extend(Marionette.Callbacks.prototype,Backbone.Events,{add:function(e,t){this._cbs=this._cbs||[],this._cbs.push({cb:e,ctx:t});var n=this;this._deferred.done(function(r,i){t&&(r=t);var s=e.call(r,i);$.when(s).always(function(){n._alldone()})})},run:function(e,t){var n=this;this._cbs=this._cbs||[],this._cbs.length?(this._alldone=_.after(this._cbs.length,function(){n.trigger("callbacks:all-done",n._cbs.length)}),this._deferred.resolve(t,e)):this.trigger("callbacks:all-done")},reset:function(){var e=this._cbs;this._deferred=Marionette.$.Deferred(),this._cbs=[],this._alldone=_.noop,_.each(e,function(e){this.add(e.cb,e.ctx)},this)}})}(Application),function(e){_.extend(Backbone.Marionette.TemplateCache,{get:function(e){var t=this.templateCaches[e]||this.make(e);return t.load()},make:function(e,t){var n=new Marionette.TemplateCache(e);return this.templateCaches[e]=n,n.rawTemplate=t,n}}),_.extend(Backbone.Marionette.TemplateCache.prototype,{loadTemplate:function(t){if(_.string.startsWith(t,"#"))return $(t).html();if(_.string.startsWith(t,"@")){if(this.rawTemplate)return this.rawTemplate;var n;return e.inject.tpl(t,!0).done(function(e){n=e}),n}return e.Util.Tpl.build(t)},compileTemplate:function(e){return Handlebars.compile(e)}})}(Application),function(e){_.extend(Marionette.RegionManager.prototype,{closeRegions:function(e){if(!_.size(this._regions))return e&&e();var t=_.after(_.size(this._regions),function(){e&&e()});_.each(this._regions,function(e,n){e.close(t)},this)},close:function(e){this.closeRegions(_.bind(function(){this.removeRegions(),Marionette.Controller.prototype.close.apply(this,arguments),e&&e()},this))}})}(Application),function(e){_.extend(Backbone.Marionette.Region.prototype,{show:function(e,t){this.ensureEl();var n=this.currentView;return n?(this.close(_.bind(function(){this._show(e,t)},this)),this):this._show(e,t)},_show:function(e,t){return _.isFunction(e)&&(e=new e(t)),e.render(),Marionette.triggerMethod.call(this,"before:show",e),_.isFunction(e.triggerMethod)?e.triggerMethod("before:show"):Marionette.triggerMethod.call(e,"before:show"),this.open(e,_.bind(function(){_.isFunction(e.triggerMethod)?e.triggerMethod("show"):Marionette.triggerMethod.call(e,"show"),Marionette.triggerMethod.call(this,"show",e)},this)),this},open:function(t,n){var r=this;this.$el.empty().append(t.el),this.currentView=t,t.parentRegion=this,this._parentLayout&&(t.parentCt=this._parentLayout,this._parentLayout.category==="Context"?t.parentCtx=this._parentLayout:this._parentLayout.parentCtx&&(t.parentCtx=this._parentLayout.parentCtx));var i=(_.isPlainObject(t.effect)?t.effect.enter:t.effect?t.effect+"In":"")||(this.$el.data("effect")?this.$el.data("effect")+"In":"")||this.$el.data("effectEnter");return i?t.$el.addClass(i+" animated").one(e.ADE,function(){t.$el.removeClass("animated "+i),n&&n()}):n&&n(),this},close:function(t){var n=this.currentView;if(!n||n.isClosed){t&&t();return}if(n.close){var r=_.bind(function(){Marionette.triggerMethod.call(this,"close",n),delete this.currentView,t&&t()},this),i=(_.isPlainObject(n.effect)?n.effect.exit:n.effect?n.effect+"Out":"")||(this.$el.data("effect")?this.$el.data("effect")+"Out":"")||this.$el.data("effectExit");if(i){n.$el.addClass(i+" animated").one(e.ADE,function(e){e.stopPropagation(),n.close(r)});return}n.close(r)}else n.remove&&(n.remove(),Marionette.triggerMethod.call(this,"close",n),delete this.currentView,t&&t())}})}(Application),function(e){_.extend(Backbone.Marionette.View.prototype,{isInDOM:function(){return this.$el?$.contains(document.documentElement,this.$el[0]):undefined},getTemplate:function(){return Marionette.getOption(this,"template")||(Marionette.getOption(this,"editors")||Marionette.getOption(this,"svg")||Marionette.getOption(this,"layout")?" ":'<div class="wrapper-full bg-warning"><p class="h3" style="margin:0;"><span class="label label-default" style="display:inline-block;">No Template</span> '+this.name+"</p></div>")},_coop:function(){var t=this.parentCt,n=e.Util.metaEventToListenerName(arguments[0]);while(t&&!t[n])t=t.parentCt;t&&t[n].apply(t,_.toArray(arguments).slice(1))},_enableTooltips:function(e){this.listenTo(this,"render",function(){this.$('[data-toggle="tooltip"]').tooltip(e)})},_enableSpecialActionTags:function(){var e=this;_.each(["scroll","scroll-bottom","scroll-top","error","load"],function(t){this.$el.find("[action-"+t+"]").each(function(n,r){var i=t.split("-"),s=$(this);if(s.data("special-e-"+i[0]))return;s.on(i[0],function(t){if(t.type==="scroll"){s.attr("action-scroll-bottom")&&s.scrollTop()+s.innerHeight()===s.prop("scrollHeight")&&(t.type+="-bottom"),s.attr("action-scroll-top")&&s.scrollTop()===0&&(t.type+="-top");if(t.type==="scroll"&&!s.attr("action-scroll"))return}e._doAction(t)}).data("special-e-"+i[0],"registered")})},this)},_enableActionTags:function(t,n){_.isBoolean(t)&&(n=t,t=""),n=n||!1,this.events=this.events||{},_.extend(this.events,{"click [action]":"_doAction","click [action-click]":"_doAction","dblclick [action-dblclick]":"_doAction","contextmenu [action-contextmenu]":"_doAction","mousedown [action-mousedown]":"_doAction","mousemove [action-mousemove]":"_doAction","mouseup [action-mouseup]":"_doAction","mouseenter [action-mouseenter]":"_doAction","mouseleave [action-mouseleave]":"_doAction","mouseover [action-mouseover]":"_doAction","mouseout [action-mouseout]":"_doAction","keydown [action-keydown]":"_doAction","keyup [action-keyup]":"_doAction","focusin [action-focusin]":"_doAction","focusout [action-focusout]":"_doAction","change [action-change]":"_doAction","select [action-select]":"_doAction","submit [action-submit]":"_doAction"}),this.actions=this.actions||{},t=t||this.name||"_UNKNOWN_.View",this._doAction=function(r){var i=$(r.currentTarget),s=i.attr("action")||i.attr("action-"+r.type)||"_NON-BUBBLE_"+r.type,o=i.attr("lock"),u=i.attr("unlock");u&&e.unlock(u);if(o&&!e.lock(o)){r.stopPropagation(),r.preventDefault(),e.trigger("app:locked",s,o);return}if(i.hasClass("disabled")||i.parent().hasClass("disabled")){r.stopPropagation(),r.preventDefault();return}var a=String(s).split(":");if(a.length>=2)return a.shift(),r.stopPropagation(),this.trigger(a.join(":"));var f=this.actions[s];if(!f){if(n)return;throw r.stopPropagation(),new Error("DEV::"+(t||"UI Component")+"::_enableActionTags() You have not yet implemented this action - ["+s+"]")}r.stopPropagation(),f.apply(this,[i,r,o])}},_enableOverlay:function(){this._overlayConfig=_.isBoolean(this.overlay)?{}:this.overlay,this.overlay=function(e,t){var n;e instanceof jQuery?n=e:_.isPlainObject(e)&&(t=e,e=t.anchor),e?n=$(e):n=$("body"),t=t||{};var r=this;return this.listenTo(this,"close",function(){n.overlay()}),n.overlay(_.extend(this._overlayConfig||{},t,{content:function(){return r.render().el},onShow:function(){r.triggerMethod("show")},onClose:function(){r.close()}})),this}},_enablePopover:function(){this._popoverConfig=_.isBoolean(this.popover)?{}:this.popover,this.popover=function(e,t){var n=this,r={animation:!1,html:!0,content:this.render().$el,container:"body",placement:"auto right"},i;e instanceof jQuery?i=e:_.isPlainObject(e)&&(t=e,e=t.anchor);if(!e)throw new Error("RUNTIME::popover:: You must specify a anchor to use for this popover view...");i=$(e);if(i.data("bs.popover")){var s=i.data("bs.popover").$tip[0].id;i.popover("destroy"),$("#"+s).remove();return}var o=i.data()||{};return(o.content||o.html)&&console.warn("DEV::Popover::define data-content in the template will cause incorrect display for the popover view!"),_.extend(r,o),t=t||{},t=_.extend(r,this._popoverConfig,t),t.placement.indexOf("auto")<0&&(t.placement="auto "+t.placement),t.container!=="body"&&console.warn("DEV::Popover::You have overwritten the container. It might cause incorrect in display."),t.bond?this.listenTo(t.bond,"close",function(){if(i.data("bs.popover")){var e=i.data("bs.popover").$tip[0].id;i.popover("destroy"),$("#"+e).remove()}}):console.warn("DEV::Popover::You have not provided a bond view. It might cause view close incorrectly"),i.popover(t).on("show.bs.popover",function(){n.$el.css(t.style||t.css||{})}).on("shown.bs.popover",function(){if(t.placement==="auto bottom"){var e=$(this),r=e.attr("aria-describedby"),s=$("#"+r);if(s[0].className.indexOf("top")>0){var o=e.offset(),u=e.height();o.top+u+s.height()<$window.height()&&(i.data("bs.popover").options.placement="bottom",i.popover("show"))}}n.triggerMethod("show")}).on("hidden.bs.popover",function(){n.close()}).popover("toggle"),this}}}),Backbone.Marionette.View.prototype.constructor=function(t){return t=t||{},(this.type||t.type)&&!this.forceViewType&&console.warn("DEV::View+::type is deprecated, please do not specify "+(this.name?"in "+this.name:"")),_.extend(this,_.pick(t,["effect","template","layout","data","useParentData","ui","coop","actions","dnd","selectable","editors","tooltips","overlay","popover","svg"])),this.category==="Editor"&&(this.get=this.getVal,this.set=this.setVal),this.listenTo(this,"render",function(){var e=this;this.ui=this.ui||{},this.$el.find("[ui]").each(function(t,n){var r=$(n),i=r.attr("ui");e.ui[i]=r})}),this.listenToOnce(this,"render",function(){this.$el.attr("data-view-name",this.name||_.uniqueId("anonymous-view-")),this.$el.data("view",this)}),this._renderCount=0,this.listenTo(this,"render",function(){this.$el.attr("data-render-count",++this._renderCount),this.$el.data("render-count",this._renderCount)}),e.Util.addMetaEvent(this,"view"),this.coop&&(this._postman={},_.each(this.coop,function(t){var n=this;this._postman[t]=function(r){n.trigger("view:"+t,r),n.isInDOM()===!1&&e.off("app:coop-"+t,n._postman[t])},e.on("app:coop-"+t,this._postman[t])},this),this.listenTo(this,"close",function(){_.each(this._postman,function(t,n){e.off("app:coop-"+n,t)})})),this.coop=this._coop,this.listenToOnce(this,"show",function(){if(this.parentCt&&this.useParentData){var e=this.parentCt.get(this.useParentData);if(!_.isUndefined(e)&&!_.isPlainObject(e)){var t={};t[this.useParentData]=e,e=t}this.data=e}this.data&&this.set(this.data)}),I18N.locale&&this.listenTo(this,"render",function(){this.$el.i18n({search:!0})}),this.dnd&&this.listenTo(this,"render",function(){var e=this;this.dnd.sortables&&delete this.dnd.drag;var t=this.dnd;if(t.drag){var n={zIndex:100,helper:"clone",items:".ui-draggable-item",drag:function(t,n){var r=e._cachedDraggableItem;e.trigger("view:drag",$(n.helper).width(r.width()),n,t)}};_.isString(t.drag)?n.items=t.drag:_.extend(n,t.drag),this._cachedDraggableItem=this.$el.find(n.items).draggable(n).first()}if(t.drop){var r={zIndex:50,activeClass:"ui-droppable-active",hoverClass:"ui-droppable-hover",accept:".ui-draggable-item",drop:function(t,n){e.trigger("view:drop",$(n.draggable),n,t)}};_.isString(t.drop)?r.accept=t.drop:_.extend(r,t.drop);var i=r.container&&this.$el.find(r.container)||this.$el;i.droppable(r),this.onDrop||(this.onDrop=function(e,t,n){i.append(e.clone().removeClass(r.accept.slice(1)).css("position","static"))})}if(t.sort){var s={placeholder:"ui-sortable-placeholder",items:".ui-sortable-item",sort:function(t,n){var r=e._cachedSortableItem;if(!r||!r.length)r=e._cachedSortableItem=e.$el.find(s.items).first();$(n.placeholder).height(r.outerHeight()).css("border","1px dashed grey"),e.trigger("view:sort",$(n.item),n,t)},change:function(t,n){e.trigger("view:sort-change",$(n.item),n,t)}};_.isString(t.sort)?s.items=t.sort:_.extend(s,t.sort);var o=s.container&&this.$el.find(s.container)||this.$el;o.sortable(s)}}),this.selectable&&this.listenTo(this,"render",function(){var e=this,t={filter:".ui-selectable-item",selected:function(t,n){e.trigger("view:item-selected",$(n.selected),t)},unselected:function(t,n){e.trigger("view:item-unselected",$(n.unselected),t)},selecting:function(t,n){e.trigger("view:item-selecting",$(n.selecting),t)},unselecting:function(t,n){e.trigger("view:item-unselecting",$(n.unselecting),t)},stop:function(t){e.trigger("view:selection-done",e.$el.find(".ui-selected"))},start:function(t){e.trigger("view:selection-begin")}};_.isString(this.selectable)?t.filter=this.selectable:_.extend(t,this.selectable),this.$el.selectable(t)}),this.actions&&(this._enableActionTags(this.actions._bubble),this.listenTo(this,"render",function(){this._enableSpecialActionTags()})),this.tooltips&&this._enableTooltips(this.tooltips),this._enableOverlay(),this._enablePopover(),this.editors&&this._activateEditors&&this.listenToOnce(this,"render",function(){this._activateEditors(this.editors)}),this.svg&&this._enableSVG&&this.listenToOnce(this,"show",this._enableSVG),this.listenTo(this,"show",function(){!this.data&&!this.useParentData&&this.trigger("view:ready")}),Backbone.Marionette.View.apply(this,arguments)}}(Application),function(e){_.extend(Backbone.Marionette.ItemView.prototype,{close:function(e){if(this.isClosed){e&&e();return}this.triggerMethod("item:before:close"),Marionette.View.prototype.close.apply(this,arguments),this.triggerMethod("item:closed"),e&&e()},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),n=Marionette.Renderer.render(t,e);return _.string.ltrim(n)&&this.$el.html(n),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},_renderTplOrResetEditors:function(){this._editors?(this.setValues(this.model.toJSON()),this.trigger("view:editors-updated")):(this.render(),this.trigger("view:data-rendered")),this.trigger("view:ready")},set:function(){this.model||(this.model=e.model());var t=this;this._oneWayBound||(this.listenTo(this.model,"change",function(){t._renderTplOrResetEditors()}),this._oneWayBound=!0);if(arguments.length===1){var n=arguments[0];if(_.isString(n))return this.data=n,this.isInDOM()&&this.refresh();if(_.isArray(n))return this.model.set("items",n)}return this.model.set.apply(this.model,arguments)},get:function(){if(this._editors){if(arguments.length){var e=this.getEditor.apply(this,arguments);if(e)return e.getVal();return}return this.getValues()}if(!this.model){console.warn("DEV::ItemView+::get() You have not yet setup data in view "+this.name);return}return arguments.length?this.model.get.apply(this.model,arguments):this.model.toJSON()},refresh:function(t){if(!this.data)return console.warn("DEV::ItemView+::refresh() You must set view.data to use this method.");this.model&&this.model.clear({silent:!0});if(_.isString(this.data)){var n=this;return e.remote(this.data,null,t).done(function(e){n.set(e)})}return this.model&&this.set(this.model.toJSON())},onRenderData:function(e){this.set(e)},_enableSVG:function(){if(!Raphael&&!Snap)throw new Error("DEV::ItemView+::_enableSVG() You did NOT have Raphael.js/Snap.svg included...");var e=Raphael||Snap;this.$el.css({width:"100%",height:"100%"}),this.paper=e(this.el),this.$el.find("svg").attr({width:"100%",height:"100%"});var t=this;this.paper._fit=function(e,n){t.paper.setSize(e||t.$el.width(),n||t.$el.height())};var n=this.paper.clear;this.paper.clear=function(){n.apply(t.paper,arguments),t.paper._fit()}},_activateEditors:function(t){this._editors=this._editors||{};if(this._editors.attachView)throw new Error("DEV::ItemView+::_activateEditors() will need this._editors object, it is now a Region!");var n=t._global||{};_.each(t,function(t,r){if(r.match(/^_./))return;var i,s;_.isFunction(t)?(i=t,t=_.extend({name:r,parentCt:this},n),s=new i(t),s.isCompound=!0):(t=_.extend({name:r,parentCt:this},n,t),t.label||(t.className=t.className||" "),t.type=t.type||"text",i=e.Core.Editor.map.Basic.supported[t.type]&&e.Core.Editor.map.Basic||e.get(t.type,"Editor"),i!==e.Core.Editor.map.Basic&&delete t.type,s=new i(t)),this._editors[r]=s.render();var o=this.$('[editor="'+r+'"]');o.length===0&&t.appendTo&&(o=this.$(t.appendTo)),o.length===0&&(o=this.$el),o.append(s.el),t.value&&s.setVal(t.value)},this),this.listenTo(this,"before:close",function(){_.each(this._editors,function(e){e.close()})}),this.getEditor=function(e){return this._editors[e]},this.getValues=function(){var t={};return _.each(this._editors,function(e,n){var r=e.getVal();r!==undefined&&r!==null&&(t[n]=r)}),e.model(t).toJSON()},this.setValues=function(t,n){if(!t)return;_.each(this._editors,function(r,i){var s=t[i]||e.extract(i,t);s!==null&&s!==undefined&&r.setVal(s,n)})},this.validate=function(e){var t={};_.each(this._editors,function(n,r){var i;this.isCompound?i=n.validate():i=n.validate(e),i&&(t[r]=i)},this),this.isCompound&&e&&this.status(t);if(_.size(t)===0)return;return t},this.status=function(e){if(_.isString(e))throw new Error("DEV::ItemView+::_activateEditors() You need to pass in messages object instead of "+e);if(!e||_.isEmpty(e)){_.each(this._editors,function(e,t){e.status()});return}_.each(e,function(e,t){this._editors[t]&&this._editors[t].status(e)},this)}}})}(Application),function(e){_.extend(Backbone.Marionette.Layout.prototype,{getViewIn:function(e){var t=this.getRegion(e);if(!t)throw new Error("DEV::Layout+::getViewIn() Region "+e+" is not available...");return t&&t.currentView},close:function(e){if(this.isClosed){e&&e();return}this.regionManager.close(_.bind(function(){Marionette.ItemView.prototype.close.apply(this,arguments),e&&e()},this))},show:function(e,t,n){var r=this.getRegion(e);if(r)return r.trigger("region:load-view",t,n)},more:function(t,n,r,i){if(!_.isArray(n))throw new Error("DEV::Layout+::more() You must give an array as data objects...");var s;n&&!_.isObject(n[0])?s=_.map(n,function(e){return{value:e}}):s=n,_.isBoolean(r)&&(i=r,r=undefined);var o=this.getViewIn(t);i&&r&&(o.itemView=_.isString(r)?e.get(r):r),o&&o.collection?i?o.set(s):o.collection.add(s):(this.getRegion(t).show(e.view({forceViewType:!0,type:"CollectionView",itemView:_.isString(r)?e.get(r):r})),this.getViewIn(t).set(s))},lock:function(e,t,n){typeof e!="string"&&(n=t,t=e,e=""),_.isBoolean(t)||(n=t,t=!0);var r=e===""?this.$el:this.getViewIn(e)?this.getViewIn(e).$el:this.getRegion(e).$el;t?_.isFunction(n)?r.overlay({content:(new n).render().$el,effect:!1}):_.isPlainObject(n)?(n.effect=n.effect||!1,r.overlay(n)):r.overlay({content:'<div class="lock-spinner"><i class="'+n+'"></i></div>',effect:!1}):r.overlay()}});var t=Backbone.Marionette.Layout;Backbone.Marionette.Layout=t.extend({constructor:function(n){return n=n||{},this.regions=_.extend({},this.regions,n.regions),this.layout&&this.listenToOnce(this,"before:render",function(){var e=this.$el,t=[];if(_.isArray(this.layout))e.flexlayout(_.result(this,"layout"));else{if(!_.isPlainObject(this.layout))throw new Error("DEV::Layout+::layout can only be an array or an object.");t=this.layout.split,e.flexlayout(t,_.result(this,"layout"))}}),this.listenToOnce(this,"render",function(){var e=this;this.$el.find("[region]").each(function(t,n){var r=$(n).attr("region");e.regions[r]={selector:'[region="'+r+'"]'}}),this.$el.find("[view]").each(function(t,n){var r=$(n);if(r.attr("region"))return;var i=r.attr("view");e.regions[_.uniqueId("anonymous-region-")]={selector:'[view="'+i+'"]'}}),this.addRegions(this.regions)}),this.listenTo(this,"render",function(){_.each(this.regions,function(t,n){this[n].ensureEl(),this[n].$el.addClass("region region-"+_.string.slugify(n)),this[n]._parentLayout=this,this[n].listenTo(this[n],"region:load-view",function(t,r){if(!t)return;if(_.isString(t)){if(!/^[_A-Z]/.test(t)){if(_.string.endsWith(t,".md")){var i=this;return e.remote(t).done(function(r){e.markdown(r,i.$el),i._parentLayout.trigger("view:markdown-rendered",t,n)}).fail(function(e,n,r){throw new Error("DEV::Application::remote() can NOT load markdown for "+t+" - ["+r+"]")})}return this.show(e.view({template:t}))}var s=e.get(t,_.isPlainObject(r)?"Widget":"",!0);if(s)return this.show(new s(r));console.warn("DEV::Layout+::region:load-view View required "+t+" can NOT be found...use app.view({name: ..., ...}).");return}if(_.isFunction(t))return this.show(new t(r));if(_.isPlainObject(t))return this.show(t)})},this)}),this.listenTo(this,"show view:data-rendered",function(){var e=[];_.each(this.regions,function(t,n){this.debug&&this[n].$el.html('<p class="alert alert-info">Region <strong>'+n+"</strong></p>");var r=this[n].$el.attr("view");r&&e.push({region:n,name:r})},this);if(!e.length)return this.trigger("view:all-region-shown");var t=_.after(e.length,_.bind(function(){this.trigger("view:all-region-shown")},this));_.each(e,function(e){this[e.region].on("show",t),this[e.region].trigger("region:load-view",e.name)},this)}),this.name&&(this.navRegion=n.navRegion||this.navRegion,this.onNavigateChain=function(t,n){if(!t||t.length===0){n?this.navRegion&&this.getRegion(this.navRegion).close():this.trigger("view:navigate-to");return}if(!this.navRegion)return this.trigger("view:navigate-to",t.join("/"));if(!this.regions[this.navRegion]){console.warn("DEV::Layout+::onNavigateChain()","invalid navRegion",this.navRegion,"in",this.name);return}var r=t.shift(),i=e.get(r);if(!i)return t.unshift(r),this.trigger("view:navigate-to",t.join("/"));var s=this.getRegion(this.navRegion);if(!s.currentView||i.prototype.name!==s.currentView.name){var o=new i;s.currentView&&s.currentView.trigger("view:navigate-away"),s.once("show",function(){o.trigger("view:navigate-chain",t)}),s.show(o);return}s.currentView.trigger("view:navigate-chain",t,!0)}),t.prototype.constructor.call(this,n)}})}(Application),function(e){_.extend(Backbone.Marionette.CollectionView.prototype,{close:function(e){if(this.isClosed){e&&e();return}this.triggerMethod("collection:before:close"),this.closeChildren(_.bind(function(){Marionette.View.prototype.close.apply(this,arguments),this.triggerMethod("collection:closed"),e&&e()},this))},closeChildren:function(e){if(!_.size(this.children))e&&e();else{var t=_.after(_.size(this.children),function(){e&&e()});this.children.each(function(e){this.removeChildView(e,t)},this)}},removeChildView:function(e,t){e&&(e.close?e.close(_.bind(function(){this.stopListening(e),this.children.remove(e),this.triggerMethod("item:removed",e),t&&t()},this)):e.remove&&(e.remove(),this.stopListening(e),this.children.remove(e),this.triggerMethod("item:removed",e),t&&t()))},onRenderData:function(e){this.set(e)},set:function(t,n){if(!_.isArray(t))throw new Error("DEV::CollectionView+::set() You need to have an array passed in as data...");return this.collection||(this.collection=e.collection(),this._initialEvents()),n&&_.isBoolean(n)?this.collection.reset(t):this.collection.set(t,n),this.trigger("view:data-rendered"),this.trigger("view:ready"),this},get:function(e){return e?this.collection&&this.collection.get(e):this.collection&&this.collection.toJSON()},onLoadPage:function(t){t=_.extend({page:1,pageSize:15,dataKey:"payload",totalKey:"total",params:{}},this._remote,t),_.each(["params","querys"],function(e){if(!t[e])return;_.extend(t[e],{offset:(t.page-1)*t.pageSize,size:t.pageSize})});var n=this;this._remote=t,e.remote(_.omit(t,"page","pageSize","dataKey","totalKey")).done(function(){n.trigger("view:load-page-done",arguments)}).fail(function(){n.trigger("view:load-page-fail",arguments)}).always(function(){n.trigger("view:load-page-always",arguments)})},onLoadPageDone:function(e){var t=e[0];this.set(t[this._remote.dataKey]),this.trigger("view:page-changed",{current:this._remote.page,total:Math.ceil(t[this._remote.totalKey]/this._remote.pageSize)})}})}(Application);var I18N={};(function(e,t){function s(e){function r(e){n.push("## module: "),n.push(e),n.push(" ##"),n.push("\n")}function s(e,t){e=String(e),t=String(t),n.push('"'),n.push(e.replace(/"/g,'\\"')),n.push('"'),n.push("="),n.push(t),n.push("\n")}var n=[];t.each(i,function(n,i){if(e&&!n)return;typeof n=="object"?t.each(n,function(e,t){t!=="_default"&&r(t),s(i,e)}):s(i,n)});var o=n.join("");return o}function o(e,n){var s=i;e&&(s=t.reject(i,function(e,t){return e?!0:!1})),t.isUndefined(n)&&(n=!0);var o={locale:r,trans:s};return n?JSON.stringify(o,null,"	"):o}function u(e){t.extend(i,e)}function a(t,n){var r=e(n),i=r.data("i18nKey"),s=r.data("i18nModule");i==="*"&&(i=e.trim(r.html())),r.html(i.i18n({module:s})),r.removeAttr("data-i18n-key")}var n={resourcePath:"static/resource",translationFile:"i18n.json"},r,i={};I18N.init=function(s){t.extend(n,s);var o=app.uri(window.location.toString()).search(!0);r=I18N.locale=o.locale||n.locale||Detectizr.browser.language;if(r)return e.ajax({url:[n.resourcePath,n.translationFile.indexOf("{locale}")>=0?n.translationFile.replace("{locale}",r):[r,n.translationFile].join("/")].join("/"),dataType:"json",success:function(e,t,n){if(!e||!e.trans)throw new Error("RUNTIME::i18n::Malformed "+r+" data...");i=e.trans},error:function(e,t,n){console.warn("RUNTIME::i18n::",n)}})},String.prototype.i18n=function(n){var s=e.trim(this);if(!r||!s)return s;var o=i[s];if(typeof o=="undefined")return i[s]="",s;if(typeof o=="object"){var u=t.isString(n)&&n||n&&n.module||"_default";o=o[u];if(typeof o=="undefined")return i[s][u]="",s}return o=String(o),o.trim()===""?s:o},I18N.getResourceProperties=s,I18N.getResourceJSON=o,I18N.insertTrans=u,Handlebars&&Handlebars.registerHelper("i18n",function(e,n,r){return r||(r=n,n=undefined),t.isString(e)?e.i18n(n&&{module:n}):e}),e.fn.i18n=function(e){return e=t.extend({search:!1},e),e.search?(this.find("[data-i18n-key]").each(a),this):this.filter("[data-i18n-key]").each(a)}})(jQuery,_),function(e){function r(n,r){r=_.extend({ignoreRoot:!1,headerHTML:""},r);var i=[],s=e("<div></div>").append(r.headerHTML).append("<ul></ul>");s.$children=s.find("> ul").data("children",[]);var o=s,u=r.ignoreRoot?1:0;n.find((r.ignoreRoot?"":"h1,")+"h2,h3,h4,h5,h6").each(function(){var n=e(this),r=n.context.localName,s=n.html(),a=n.attr("id");i.push(n);var f=e('<li><a href="#" data-id="'+a+'" action="goTo">'+s+"</a><ul></ul></li>");f.data({title:s,id:a});switch(r){case"h2":case"H2":f.addClass("chapter");break;case"h3":case"H3":f.addClass("section");break;default:}f.$children=f.find("> ul").data("children",[]);var l=t[r]-u;if(l>0)f.$parent=o,o.$children.append(f).data("children").push(f),u++;else if(l===0)f.$parent=o.$parent,o.$parent.$children.append(f).data("children").push(f);else{while(l<0)l++,o=o.$parent,u--;f.$parent=o.$parent,o.$parent.$children.append(f).data("children").push(f)}o=f,n.data("toc-node",f)}),n.data("toc",{html:'<div class="md-toc">'+s.html()+"</div>",$headers:i})}var t={};for(var n=1;n<=6;n++)t["h"+n]=t["H"+n]=n;e.fn.toc=function(t){return this.each(function(n,i){var s=e(i);r(s,t)})}}(jQuery),function(e){var t=Handlebars.compile(['<div class="overlay {{class}}" style="position:absolute; top: 0; left: 0; right: 0; bottom: 0; {{#unless class}}z-index:{{zIndex}};background:{{background}};{{/unless}}">','<div class="overlay-outer" style="display: table;table-layout: fixed; height: 100%; width: 100%;">','<div class="overlay-inner" style="display: table-cell;text-align: center;vertical-align: middle; width: 100%;">','<div class="overlay-content-ct" style="display: inline-block;outline: medium none; position:relative;">',"</div>","</div>","</div>","</div>"].join(""));e.fn.overlay=function(n,r){e.isPlainObject(n)&&(r=n,n=!0);if(_.isString(n)||_.isNumber(n))r=_.extend({content:n},r),n=!0;return _.isUndefined(n)&&(n=!1),r=r||{},this.each(function(i,s){var o=e(this),u;if(!n){if(!o.data("overlay"))return;u=o.data("overlay"),r=_.extend({},u.data("closeOptions"),r);var a=r.closeEffect||r.effect;_.isUndefined(a)&&(a="clip"),a||(r.duration=0),u.hide({effect:a,duration:r.closeDuration||r.duration,easing:r.closeEasing||r.easing,complete:function(){r.onClose&&r.onClose(o,u),u.data("onResize")&&$window.off("resize",u.data("onResize")),u.remove();var e=o.data("recover-css");o.css({overflowY:e.overflow.y,overflowX:e.overflow.x,position:e.position}),o.removeData("overlay","recover-css")}})}else{if(o.data("overlay"))return;r=_.extend({zIndex:100,background:r.content?"rgba(0, 0, 0, 0.6)":"none",move:!1,resize:!1},r),u=e(t(r)),o.data("recover-css",{overflow:{x:o.css("overflowX"),y:o.css("overflowY")},position:o.css("position")}),o.append(u).css({position:"relative",overflow:"hidden"}),o[0].tagName==="BODY"&&(u.offset({top:$window.scrollTop()}),u.height($window.height()),u.data("onResize",function(){u.height($window.height())}),$window.on("resize",u.data("onResize"))),u.hide(),o.data("overlay",u),$container=u.find(".overlay-content-ct"),r.resize&&$container.resizable({containment:"parent"}),r.move&&$container.draggable({containment:"parent"}),u.data({closeOptions:_.pick(r,"closeEffect","effect","closeDuration","duration","closeEasing","easing","onClose"),container:$container}),u.data("container").html(_.isFunction(r.content)?r.content(o,u):r.content);var f=r.openEffect||r.effect;_.isUndefined(f)&&(f="clip"),f||(r.duration=0),u.show({effect:f,duration:r.openDuration||r.duration,easing:r.openEasing||r.easing,complete:function(){r.onShow&&r.onShow(o,u)}})}})}}(jQuery),function(e){e.Core.Editor.register("Basic",function(){var t=e.view({template:"#editor-basic-tpl",className:"form-group",type:"ItemView",forceViewType:!0,events:{change:"_triggerEvent","keyup input, textarea":"_triggerEvent",focusout:"_triggerEvent",focusin:"_triggerEvent"},_triggerEvent:function(e){var t=this;t.trigger("editor:"+e.type,this.model.get("name"),this),this.parentCt&&(this.parentCt.trigger("editor:"+e.type,this.model.get("name"),this),e.type=="change"&&this.parentCt.trigger("view:editor-changed",this.model.get("name"),this))},initialize:function(t){this.parentCt=t.parentCt||this.parentCt;if(t.type in{select:!0,radios:!0,checkboxes:!0}){switch(t.type){case"radios":t.type="radio";break;case"checkboxes":t.type="checkbox";break;default:}t.options=t.options||{},t.options=_.extend({data:[],valueField:"value",labelField:"label"},t.options);var n=t.options,r=function(e){return _.isObject(e[0])?e=_.map(e,function(e){return{value:e[n.valueField],label:e[n.labelField]}}):e=_.map(e,function(e){return{value:e,label:_.string.titleize(e)}}),e},i=function(e){return _.isArray(e.data)||(e.grouped=!0),e.grouped?_.each(e.data,function(t,n){e.data[n]=r(t)}):e.data=r(e.data),e};n.remote?this.listenToOnce(this,"render",function(){var t=this;e.remote(n.remote).done(function(e){t.setChoices(e)})}):i(t.options),this.setChoices=function(e){var t=this.model.get("options");t.data=e,this.model.set("options",i(t)),this.render()}}var s=_.uniqueId("basic-editor-");this.model=new Backbone.Model({uiId:s,layout:t.layout||"",name:t.name,type:t.type,multiple:t.multiple||!1,rows:t.rows||3,fieldname:t.fieldname||s,label:t.label||"",placeholder:t.placeholder||"",help:t.help||"",tooltip:_.isString(t.tooltip)&&t.tooltip||"",options:t.options||undefined,boxLabel:t.boxLabel||"",value:t.value,checked:t.checked||!0,unchecked:t.unchecked||!1}),this.name=[this.name,t.type,t.name].join("."),t.validate&&(this.validators=_.map(t.validate,function(e,t){return _.isFunction(e)?{fn:e}:{rule:t,options:e}}),this.validate=function(n){if(!this.isEnabled())return;var r;if(_.isFunction(t.validate))r=t.validate(this.getVal(),this.parentCt);else{var i=_.clone(this.validators);while(i.length>0){var s=i.shift();s.fn?r=s.fn(this.getVal(),this.parentCt):r=e.Core.Editor.rules[s.rule]&&e.Core.Editor.rules[s.rule](s.options,this.getVal(),this.parentCt);if(!_.isEmpty(r))break}}return n&&this._followup(r),r},this._followup=function(e){_.isEmpty(e)?(this.status(),this.eagerValidation=!1):(this.status(e),this.eagerValidation=!0)},this.listenTo(this,"editor:change editor:keyup",function(){this.eagerValidation&&this.validate(!0)})),t.tooltip&&this._enableTooltips(_.isObject(t.tooltip)?t.tooltip:{});if(t.type==="file"){this._enableActionTags("Editor.File");if(!t.upload||!t.upload.url)throw new Error("DEV::Editor.Basic.File::You need options.upload.url to point to where to upload the file.");this.listenTo(this,"editor:change",function(){this.ui.input.val()?(t.upload.standalone&&this.ui.upload.removeClass("hidden").show(),this.ui.clearfile.removeClass("hidden").show()):(this.ui.upload.hide(),this.ui.clearfile.hide())}),this.onRender=function(){this.$el.fileupload({fileInput:null}),t.upload.callbacks&&_.each(t.upload.callbacks,function(e,t){this.$el.bind("fileupload"+t,_.bind(e,this))},this)},_.extend(this.actions,{clear:function(){this.setVal("",!0)},upload:function(){var e=this;this.upload(_.extend({success:function(t){e.ui.result.html(_.isString(t)?t.i18n():JSON.stringify(t)),_.delay(function(){e.ui.result.empty()},6e3)}},t.upload))}}),this.upload=function(n){n=_.extend({},t.upload,n),n.formData&&(n.formData=_.result(n,"formData")),e.config.baseAjaxURI&&(n.url=[e.config.baseAjaxURI,n.url].join("/")),this.$el.fileupload("send",_.extend({timeout:e.config.timeout*2,fileInput:this.ui.input},n))}}},isEnabled:function(){return!this._inactive},disable:function(e){e===!1?this._inactive=!1:this._inactive=!0;if(_.isUndefined(e)){this.ui.input&&this.ui.input.prop("disabled",!0);return}e?this.$el.hide():(this.ui.input&&this.ui.input.prop("disabled",!1),this.$el.show())},setVal:function(e,t){this.ui.inputs?this.ui.inputs.find("input").val(_.isArray(e)?e:[e]):this.ui["input-ro"]?(e=_.escape(e),this.ui["input-ro"].data("value",e).html(e)):(this.model.get("type")==="checkbox"&&this.ui.input.prop("checked",e===this.model.get("checked")),this.ui.input.val(e)),t&&this._triggerEvent({type:"change"})},getVal:function(){if(!this.isEnabled())return;if(this.ui.inputs){var e=this.$("input:checked").map(function(e,t){return $(this).val()}).get();return this.model.get("type")==="radio"&&(e=e.pop()),e}if(this.model.get("type")==="checkbox")return this.ui.input.prop("checked")?this.model.get("checked")||!0:this.model.get("unchecked")||!1;if(this.ui.input)return this.ui.input.val()},validate:_.noop,status:function(e){if(e){var t="error",n=e;_.isString(e)||(t=e.type||t,n=e.msg||t);var r="has-"+t;this.$el.removeClass(this.$el.data("type-class")).addClass(r).data("type-class",r),this.ui.msg.html(n.i18n())}else this.$el.removeClass(this.$el.data("type-class")).removeData("type-class"),this.ui.msg.empty()}});return t.supported={ro:!0,text:!0,textarea:!0,select:!0,file:!0,checkboxes:!0,checkbox:!0,radios:!0,hidden:!0,password:!0,number:Modernizr.inputtypes.number,range:Modernizr.inputtypes.range,email:Modernizr.inputtypes.email,tel:Modernizr.inputtypes.tel,search:Modernizr.inputtypes.search,url:Modernizr.inputtypes.url,color:Modernizr.inputtypes.color,time:Modernizr.inputtypes.time,date:Modernizr.inputtypes.date,datetime:Modernizr.inputtypes.datetime,"datetime-local":Modernizr.inputtypes["datetime-local"],month:Modernizr.inputtypes.month,week:Modernizr.inputtypes.week},t}),e.Util.Tpl.build("editor-basic-tpl",["{{#if label}}",'<label class="control-label {{#if layout}}{{layout.label}}{{/if}}" for="{{uiId}}">{{i18n label}}</label>',"{{/if}}",'<div class="{{#if layout}}{{layout.field}}{{/if}}" data-toggle="tooltip" title="{{i18n tooltip}}">','{{#is type "select"}}','<select ui="input" name="{{#if fieldname}}{{fieldname}}{{else}}{{name}}{{/if}}" class="form-control" id="{{uiId}}" {{#if multiple}}multiple="multiple"{{/if}} style="margin-bottom:0">',"{{#if options.grouped}}","{{#each options.data}}",'<optgroup label="{{i18n @key}}">',"{{#each this}}",'<option value="{{value}}">{{i18n label}}</option>',"{{/each}}","</optgroup>","{{/each}}","{{else}}","{{#each options.data}}",'<option value="{{value}}">{{i18n label}}</option>',"{{/each}}","{{/if}}","</select>","{{else}}",'{{#is type "textarea"}}','<textarea ui="input" name="{{#if fieldname}}{{fieldname}}{{else}}{{name}}{{/if}}" class="form-control" id="{{uiId}}" rows="{{rows}}" placeholder="{{i18n placeholder}}" style="margin-bottom:0"></textarea>',"{{else}}","{{#if options}}",'<div ui="inputs">',"{{#each options.data}}",'<div class="{{../type}} {{#if ../options.inline}}{{../type}}-inline{{/if}}">','<input id="{{../uiId}}-{{@index}}" ui="input" name="{{#if ../fieldname}}{{../fieldname}}{{else}}{{../name}}{{/if}}{{#is ../type "checkbox"}}[]{{/is}}" type="{{../type}}" value={{value}}> ','<label for="{{../uiId}}-{{@index}}">{{i18n label}}</label>',"</div>","{{/each}}","</div>","{{else}}",'<div class="{{type}}">','{{#is type "checkbox"}}','<input id="{{uiId}}" ui="input" name="{{#if fieldname}}{{fieldname}}{{else}}{{name}}{{/if}}" type="checkbox" value="{{value}}"> ','<label for="{{uiId}}">{{i18n boxLabel}}</label>',"{{else}}",'{{#is type "ro"}}','<div ui="input-ro" data-value="{{{value}}}" class="form-control-static">{{value}}</div>',"{{else}}",'<input ui="input" name="{{#if fieldname}}{{fieldname}}{{else}}{{name}}{{/if}}" {{#isnt type "file"}}class="form-control"{{else}} style="display:inline;" {{/isnt}} type="{{type}}" id="{{uiId}}" placeholder="{{i18n placeholder}}" value="{{value}}"> <!--1 space-->','{{#is type "file"}}','<span action="upload" class="hidden file-upload-action-trigger" ui="upload" style="cursor:pointer;"><i class="glyphicon glyphicon-upload"></i> <!--1 space--></span>','<span action="clear" class="hidden file-upload-action-trigger" ui="clearfile"  style="cursor:pointer;"><i class="glyphicon glyphicon-remove-circle"></i></span>','<span ui="result" class="file-upload-result wrapper-horizontal"></span>',"{{/is}}","{{/is}}","{{/is}}","</div>","{{/if}}","{{/is}}","{{/is}}",'{{#if help}}<span class="help-block editor-help-text" style="margin-bottom:0"><small>{{i18n help}}</small></span>{{/if}}','<span class="help-block editor-status-text input-error" ui="msg">{{i18n msg}}</span>',"</div>"])}(Application),function(e){e.Core.Editor.rules={required:function(e,t,n){if(!t)return _.isObject(e)&&e.msg||"This field is required"}},e.Core.Editor.addRule=function(t,n){if(!t||!_.isFunction(n))throw new Error("DEV::Editor::Basic validation rule must have a name and a function implementation.");e.Core.Editor.rules[t]&&console.warn("DEV::Editor::Basic validation rule name ["+t+"] is already defined."),e.Core.Editor.rules[t]=n}}(Application),function(e){e.widget("Datagrid",function(){var t=e.view({tagName:"table",template:['<thead region="header"></thead>','<tbody region="body"></tbody>'],initialize:function(e){this._options=_.extend({data:[],details:!1,columns:[]},e)},onShow:function(){var e=this,t=(new i({el:this.body.$el})).on("all",function(t){(/page-/.test(t)||/data-/.test(t))&&e.trigger.apply(e,arguments)});this.header.show(n),this.body.show(t),this.trigger("view:reconfigure",this._options)},onReconfigure:function(e){e=e||{},this._options=_.extend(this._options,e),_.each(this._options.columns,function(e){e.header=e.header||"string",e.cell=e.cell||e.header||"string",e.label=e.label||_.string.titleize(e.name)}),this.header.currentView&&this.header.currentView.set(this._options.columns),this.body.currentView&&(this.body.currentView._options=this._options),this.trigger("view:render-data",this._options.data)},onRenderData:function(e){this.body.currentView&&this.body.currentView.trigger("view:render-data",e)},onLoadPage:function(e){this.body.currentView&&this.body.currentView.trigger("view:load-page",e)},set:function(e){this.trigger("view:reconfigure",{data:e})},get:function(){return this.getBody().get()},getBody:function(){return this.body.currentView},getHeader:function(){return this.header.currentView}}),n=e.view({type:"CollectionView",forceViewType:!0,itemView:"dynamic",itemViewEventPrefix:"headercell",tagName:"tr",initialize:function(e){this.grid=this.parentCt||e&&e.grid},buildItemView:function(t,n,r){return e.widget(_.string.classify([t.get("header"),"header","cell"].join("-")),{model:t,tagName:"th",row:this})}}),r=e.view({type:"CollectionView",forceViewType:!0,itemView:"dynamic",itemViewEventPrefix:"cell",tagName:"tr",triggers:{click:{event:"clicked",preventDefault:!1},dblclick:{event:"dblclicked",preventDefault:!1}},initialize:function(e){this.grid=e.body.parentCt},buildItemView:function(t,n,r){return e.widget(_.string.classify([t.get("cell"),"cell"].join("-")),{tagName:"td",model:t,row:this})}}),i=e.view({type:"CollectionView",forceViewType:!0,itemView:r,itemViewEventPrefix:"row",itemViewOptions:function(t,n){return{collection:e.collection(_.map(this._options.columns,function(r){return _.extend({value:e.extract(r.name||"",t.attributes),index:n},r)},this)),body:this}},itemEvents:{clicked:function(e,t){t.grid.trigger("row:clicked",t)},dblclicked:function(e,t){t.grid.trigger("row:dblclicked",t)}}});return t})}(Application),function(e){e.widget("StringHeaderCell",function(){var t=e.view({template:'<span><i class="{{icon}}"></i> {{{i18n label}}}</span>'});return t})}(Application),function(e){e.widget("StringCell",function(){var t=e.view({template:"<span>{{{value}}}</span>"});return t})}(Application),function(e){e.widget("SeqCell",function(){var t=e.view({template:"{{index}}"});return t})}(Application),function(e){e.widget("ActionCell",function(){var t=e.view({template:["{{#each actions}}",'<span class="action-cell-item" action="{{@key}}" data-toggle="tooltip" title="{{i18n tooltip}}"><i class="{{icon}}"></i> {{i18n label}}</span> ',"{{/each}}"],className:"action-cell",initialize:function(e){this.row=e.row;var t=this.model.get("actions")||{};_.each({preview:{icon:"glyphicon glyphicon-eye-open",tooltip:"Preview"},edit:{icon:"glyphicon glyphicon-pencil",tooltip:"Edit"},"delete":{icon:"glyphicon glyphicon-remove",tooltip:"Delete"}},function(e,n){t[n]&&(t[n]=_.extend(e,t[n]))}),this.actions=this.actions||{},_.each(t,function(e,t){e.fn&&(this.actions[t]=function(t){e.fn.apply(this.row,arguments)})},this),this.model.set("actions",t),this._enableActionTags(!0)},tooltips:!0});return t})}(Application),function(e){e.widget("Tree",function(){var t={type:"CompositeView",forceViewType:!0,tagName:"li",itemViewContainer:"ul",itemViewOptions:function(){return{parent:this}},className:function(){return _.size(this.model.get("children"))>=1?"node":"leaf"},initialize:function(t){this.parent=t.parent,this.className()==="node"&&(this.collection=e.collection(this.model.get("children"))),this.listenTo(this,"render",function(){this.$el.addClass("clickable").data({view:this,$children:this.$el.find("> ul"),$parent:this.parent&&this.parent.$el})})},template:['<a class="item" href="#"><i class="type-indicator"></i> <i class="{{icon}}"></i> {{{i18n val}}}</a>','<ul class="children hidden"></ul>']},n=e.view({type:"CollectionView",forceViewType:!0,className:"tree tree-root",tagName:"ul",initialize:function(n){this._options=n,this.itemView=this._options.itemView||e.view(_.extend({},t,_.omit(this._options.node,"type","tagName","itemViewContainer","itemViewOptions","className","initialize"))),this.onSelected=n.onSelected||this.onSelected},onShow:function(){this.trigger("view:reconfigure",this._options)},onReconfigure:function(e){_.extend(this._options,e),this.trigger("view:render-data",this._options.data)},events:{"click .clickable":function(e){e.stopPropagation();var t=$(e.currentTarget),n=t.data();t.hasClass("node")&&this.trigger("view:toggleChildren",n),this.trigger("view:selected",t.data(),t,e)}},onToggleChildren:function(e){e.$children.toggleClass("hidden"),e.view.$el.toggleClass("expanded")},onSelected:function(e,t,n){}});return n})}(Application),function(e){e.widget("Paginator",function(){var t=e.view({className:"pagination",tagName:"ul",template:['<li {{#if atFirstPage}}class="disabled"{{/if}}><a href="#" action="goToFirstPage" data-page="--">'+_.escape("<<")+"</a></li>",'<li {{#if atFirstWindow}}class="hidden"{{/if}}><a href="#" action="goToAdjacentWindow" data-window="-">...</a></li>',"{{#each pages}}",'<li {{#if isCurrent}}class="active"{{/if}}><a href="#" action="goToPage" data-page="{{number}}">{{number}} <span class="sr-only">(current)</span></a></li>',"{{/each}}",'<li {{#if atLastWindow}}class="hidden"{{/if}}><a href="#" action="goToAdjacentWindow" data-window="+">...</a></li>','<li {{#if atLastPage}}class="disabled"{{/if}}><a href="#" action="goToLastPage" data-page="++">'+_.escape(">>")+"</a></li>"],initialize:function(e){this._options=_.extend({pageWindowSize:5},e),e.target&&this.listenTo(e.target,"view:page-changed",function(e){this.trigger("view:reconfigure",{currentPage:e.current,totalPages:e.total})})},onShow:function(){},onReconfigure:function(e){_.extend(this._options,e),this._options.currentWindow=Math.ceil(this._options.currentPage/this._options.pageWindowSize);var t={atFirstPage:this._options.currentPage===1,atLastPage:this._options.currentPage===this._options.totalPages,atFirstWindow:this._options.currentWindow===1,atLastWindow:this._options.currentWindow===Math.ceil(this._options.totalPages/this._options.pageWindowSize),pages:_.reduce(_.range(1,this._options.totalPages+1),function(e,t){return t>(this._options.currentWindow-1)*this._options.pageWindowSize&&t<=this._options.currentWindow*this._options.pageWindowSize&&e.push({number:t,isCurrent:t===this._options.currentPage}),e},[],this)};this.trigger("view:render-data",t)},actions:{goToPage:function(e,t){t.preventDefault();var n=e.data("page");if(n===this._options.currentPage)return;this.trigger("view:change-page",n)},goToFirstPage:function(e,t){t.preventDefault(),this.trigger("view:change-page",1)},goToLastPage:function(e,t){t.preventDefault(),this.trigger("view:change-page",this._options.totalPages)},goToAdjacentWindow:function(e,t){t.preventDefault();var n=this._options.currentWindow,r=e.data("window");r==="+"?n++:n--;if(n<1||n>Math.ceil(this._options.totalPages/this._options.pageWindowSize))return;this.trigger("view:change-page",n==1?1:(n-1)*this._options.pageWindowSize+1)}},onChangePage:function(e){if(this._options.onChangePage)return this._options.onChangePage.call(this,e);this._options.target&&this._options.target.trigger("view:load-page",{page:e})}});return t})}(Application),app.stagejs="1.9.3-1115 build 1470964766471";